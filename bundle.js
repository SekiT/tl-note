(function(){"use strict";let Nt=[],f;function Ft(e){let t=f,o=()=>{};f=o,H(o);let n=e(()=>{V(o),f=void 0});return f=t,n}function zt(e){let t=f;f=void 0;let o=e();return f=t,o}function N(e){function t(o){if(arguments.length===0)return f&&!t.__o.has(f)&&(t.__o.add(f),f.u.push(t)),e;e=o;let n=f;return f=void 0,t.o=new Set(t.__o),t.o.forEach(r=>r.i=!1),t.o.forEach(r=>{r.i||r()}),f=n,e}return t.$o=1,t.__o=new Set,t.t=Nt,t}function d(e,t){function o(){let r=f;return f&&f.__c.push(o),V(o),o.i=!0,f=o,t=e(t),f=r,t}function n(){return o.i?f&&o.u.forEach(r=>r()):t=o(),t}return e.s=o,H(o),o(),n.$o=1,n}function Mt(e){return f&&f.l.push(e),e}function Vt(e){return d(e),()=>V(e.s)}function V(e){e.__c.forEach(V),e.u.forEach(t=>{t.__o.delete(e),t.o&&t.o.delete(e)}),e.l.forEach(t=>t()),H(e)}function H(e){e.u=[],e.__c=[],e.l=[]}let et=(e,t,o,n)=>{let r={};for(let l=1;l<t.length;l++){let i=t[l],c=typeof i=="number"?o[i]:i,a=t[++l];if(a===1)n[0]=c;else if(a===3)n[1]=Object.assign(n[1]||{},c);else if(a===5)(n[1]=n[1]||{})[t[++l]]=c;else if(a===6){let v=t[++l],I=(n[1]=n[1]||{})[v],y=r[v];y||typeof c!="function"&&typeof I!="function"||(y=I&&[I]||[],n[1][v]=function(){let X="";for(var T=0;T<y.length;T++)X+=typeof y[T]=="function"?y[T].call(this):y[T];return X}),y?y.push(c):n[1][v]+=c+""}else if(a){let v=()=>e.apply(null,et(e,c,o,["",null]));n.push(typeof n[0]=="function"?v:v())}else n.push(c)}return n},Lt=function(e){let t,o,n=1,r="",l="",i=[0],c=a=>{n===1&&(a||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(a||r,0):n===3&&(a||r)?(i.push(a||r,1),n=2):n===2&&r==="..."&&a?i.push(a,3):n===2&&r&&!a?i.push(!0,5,r):n>=5&&((r||!a&&n===5)&&(i.push(r,n,o),n=6),a&&(i.push(a,n,o),n=6)),r=""};for(let a=0;a<e.length;a++){a&&(n===1&&c(),c(a));for(let v=0;v<e[a].length;v++)t=e[a][v],n===1?t==="<"?(c(),i=[i],n=3):r+=t:n===4?r==="--"&&t===">"?(n=1,r=""):r=t+r[0]:l?t===l?l="":r+=t:t==='"'||t==="'"?l=t:t===">"?(c(),n=1):n&&(t==="="?(n=5,o=r,r=""):t==="/"&&(n<5||e[a][v+1]===">")?(c(),n===3&&(i=i[0]),n=i,(i=i[0]).push(n,2),n=0):t===" "||t==="	"||t===`
`||t==="\r"?(c(),n=2):r+=t),n===3&&r==="!--"&&(n=4,i=i[0])}return c(),i},ot=new Map,Rt=function(e){let t=ot.get(this);return t||(t=new Map,ot.set(this,t)),t=et(this,t.get(e)||(t.set(e,t=Lt(e)),t),arguments,[]),t.length>1?t:t[0]},Wt=function(){let e=Rt.apply(this,arguments);if(e)return Array.isArray(e)?this(e):typeof e=="object"?e:this([e])};function Ut(){let e=Wt.bind(this);return(this.wrap||e).apply(e,arguments)}let s={},Xt=[];function nt(e){return this.t&&this.t[e.type](e)}s.h=(...e)=>{let t,o=n=>{if(n!=null)if(typeof n=="string")t?s.add(t,n):t=s.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))t||(t=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)t?s.add(t,n):t=n;else if(typeof n=="object")s.property(t,n,null,s.s);else if(typeof n=="function")if(t){let r=s.add(t,"");s.insert(t,n,r)}else t=n.apply(null,e.splice(1));else s.add(t,""+n)};return e.forEach(o),t},s.insert=(e,t,o,n,r)=>(e=o&&o.parentNode||e,r=r||n instanceof Node&&n,t===n||(n&&typeof n!="string"||!(typeof t=="string"||typeof t=="number"&&(t+=""))?typeof t=="function"?s.subscribe(()=>{n=s.insert(e,t.call({el:e,endMark:o}),o,n,r)}):(o?n&&(r||(r=n.o&&n.o.nextSibling||o.previousSibling),s.rm(e,r,o)):e.textContent="",n=null,t&&t!==!0&&(n=s.add(e,t,o))):(n!=null&&e.firstChild?o?(o.previousSibling||e.lastChild).data=t:e.firstChild.data=t:o?s.add(e,t,o):e.textContent=t,n=t)),n),s.property=(e,t,o,n,r)=>{if(t!=null)if(!o||o==="attrs"&&(n=!0))for(o in t)s.property(e,t[o],o,n,r);else o[0]!=="o"||o[1]!=="n"||t.$o?typeof t=="function"?s.subscribe(()=>{s.property(e,t.call({el:e,name:o}),o,n,r)}):r?e.style.setProperty(o,t):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?e.setAttribute(o,t):o==="style"?typeof t=="string"?e.style.cssText=t:s.property(e,t,null,n,!0):(o==="class"&&(o+="Name"),e[o]=t):((l,i,c)=>{i=i.slice(2).toLowerCase(),c?l.addEventListener(i,nt):l.removeEventListener(i,nt),(l.t||(l.t={}))[i]=c})(e,o,t)},s.add=(e,t,o)=>{let n=(r=>{const{childNodes:l}=r;if(l&&r.nodeType===11)return l.length<2?l[0]:{o:s.add(r,"",l[0])}})(t=(r=>typeof r=="string"?document.createTextNode(r):r instanceof Node?r:s.h(Xt,r))(t))||t;return e.insertBefore(t,o&&o.parentNode&&o),n},s.rm=(e,t,o)=>{for(;t&&t!==o;){let n=t.nextSibling;e===t.parentNode&&e.removeChild(t),t=n}},s.subscribe=Vt,s.cleanup=Mt,s.root=Ft,s.sample=zt,s.hs=(...e)=>{let t=s.s;s.s=!0;let o=rt(...e);return s.s=t,o};let rt=(...e)=>s.h.apply(s.h,e),g=(...e)=>Ut.apply(rt,e);var Jt=Object.defineProperty,Kt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,it=(e,t,o)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Qt=(e,t)=>{for(var o in t||(t={}))qt.call(t,o)&&it(e,o,t[o]);if(lt)for(var o of lt(t))Gt.call(t,o)&&it(e,o,t[o]);return e},Yt=(e,t)=>Kt(e,Ht(t));const k=e=>({width:e,height:e,"font-size":`calc(${e} * 0.8)`,padding:0,border:"2px solid #99c","border-radius":"50%","background-color":"#ccf",color:"#339"}),q=e=>Yt(Qt({},k(e)),{position:"absolute",right:"7px","font-size":"12px","background-color":"#ccc","border-color":"#999"}),G={position:"fixed",top:0,left:0,width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.6)","font-family":"sans-serif","font-size":"24px"},Q={position:"absolute",top:"50vh",left:"50vw",transform:"translate(-50%, -50%)","border-radius":"12px",padding:"12px","background-color":"white"},x=N([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),L=([e,t,o])=>e+t+o<384?"white":"black",w=N([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),st=d(()=>`a${Math.max(0,...w().map(({id:e})=>parseInt(e.slice(1),10)))+1}`);var Zt=Object.defineProperty,te=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,ut=(e,t,o)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))at.call(t,o)&&ut(e,o,t[o]);if(R)for(var o of R(t))ct.call(t,o)&&ut(e,o,t[o]);return e},D=(e,t)=>te(e,ee(t)),oe=(e,t)=>{var o={};for(var n in e)at.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&R)for(var n of R(e))t.indexOf(n)<0&&ct.call(e,n)&&(o[n]=e[n]);return o};const h=N({mode:"none",id:"",color:[0,0,0],name:""}),ne=d(()=>D(j({},G),{display:h().mode==="none"?"none":"block"})),re={"font-size":"18px"},le={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},ie=d(()=>le[h().mode]),se=q("24px"),ae=()=>{h(D(j({},h()),{mode:"none"}))},ce={margin:"5px 0 7px 0"},pt=d(()=>`#${h().color.map(e=>e.toString(16).padStart(2,"0")).join("")}`),ue=d(()=>h().name),pe={width:"24px",height:"24px",padding:0,"border-radius":"12px","background-color":"transparent"},de=e=>{const[t,o,n,r,l,i]=e.target.value.slice(1).split(""),c=[t+o,n+r,l+i].map(a=>parseInt(a,16));h(D(j({},h()),{color:c}))},fe=d(()=>({"margin-left":"5px",padding:0,width:"20vw","font-size":"24px","line-height":"24px","text-align":"center","background-color":pt(),color:L(h().color)})),ye=e=>{h(D(j({},h()),{name:e.target.value}))},me={"margin-top":"7px"},$e=D(j({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),ve=()=>{const e=h();x(x().filter(({id:t})=>t!==e.id)),w(w().flatMap(t=>{const{columnIds:o}=t;return o.length===1&&o[0]===e.id?[]:[D(j({},t),{columnIds:o.filter(n=>n!==e.id)})]})),h(D(j({},e),{mode:"none"}))},ge=d(()=>h().mode==="update"&&g`<button style=${$e} onclick=${ve}>üóëÔ∏è</button>`),he=D(j({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9"}),be=()=>{const e=h(),{mode:t}=e,o=oe(e,["mode"]),n=x();x(t==="add"?[...n,o]:n.map(r=>r.id===o.id?o:r)),h(j({mode:"none"},o))};var _e=()=>g`  <div style=${ne}>    <div style=${Q}>      <div style="display:flex">        <div style=${re}>${ie}</div>        <button style=${se} onclick=${ae}>X</button>      </div>      <hr style=${ce} />      <div>        <input type="color" value=${pt} style=${pe} onchange=${de} />        <input type="text" value=${ue} style=${fe} onchange=${ye} />      </div>      <div style=${me}>        ${ge}        <button style=${he} onclick=${be}>‚úîÔ∏è</button>      </div>    </div>  </div>`;function dt(e,t,o){const{root:n,subscribe:r,sample:l,cleanup:i}=s;o==null&&(o=!t.$t);let c=s.h([]),a=s.add(c,""),v=new Map,I=new Map,y=new Set;function X(b,E){if(b==null)return;let B=I.get(b);return E===1?(y.delete(b),B||(B=o?n(m=>(v.set(b,m),t(b.$v||b))):t(b.$v||b),B.nodeType===11&&(B=(m=>{const{childNodes:$}=m,{length:C}=$;if(C<2)return $[0];let P=Array.from($);return{nodeType:111,t:P[0],o:P[C-1],l(){if($.length!==C){let M=0;for(;M<C;)m.appendChild(P[M++])}return m}}})(B)||B),I.set(b,B))):E===-1&&y.add(b),((m,$)=>m.nodeType===111?1/$<0?$?s.rm(m.t.parentNode,m.t.nextSibling,m.o.nextSibling)||m.t:m.o:$?m.l():m.t:m)(B,E)}function T(b){let E=v.get(b);E&&(E(),v.delete(b)),I.delete(b)}return i(r(b=>{let E=e();return l(()=>{y.clear();let B=Array.from(function(m,$,C,P,M){let At=new Map,Tt=new Map,p,A;for(p=0;p<$.length;p++)At.set($[p],p);for(p=0;p<C.length;p++)Tt.set(C[p],p);for(p=A=0;p!==$.length||A!==C.length;){var tt=$[p],J=C[A];if(tt===null)p++;else if(C.length<=A)m.removeChild(P($[p],-1)),p++;else if($.length<=p)m.insertBefore(P(J,1),P($[p],0)||M),A++;else if(tt===J)p++,A++;else{var Tn=Tt.get(tt),K=At.get(J);Tn===void 0?(m.removeChild(P($[p],-1)),p++):K===void 0?(m.insertBefore(P(J,1),P($[p],0)||M),A++):(m.insertBefore(P($[K],1),P($[p],0)||M),$[K]=null,K>p+1&&p++,A++)}}return C}(a.parentNode,b||[],E,X,a));return y.forEach(T),B})})),i(function(){v.forEach(b=>b()),v.clear(),I.clear(),y.clear()}),c}var _=N([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const xe=(e,t)=>{const{length:o}=e;for(let n=0;n<o;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},we=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;function*Pe({fromDay:e,fromTime:t,toDay:o,toTime:n,step:r}){let l=e,[i,c]=t.split(":").map(y=>parseInt(y,10));const[a,v]=n.split(":").map(y=>parseInt(y,10)),I=[o,a,v];for(;xe([l,i,c],I)<=0;){yield[l,we(i,c)];const y=Math.floor((c+r)/60);l+=Math.floor((i+y)/24),i=(i+y)%24,c=(c+r)%60}}var Oe=Object.defineProperty,Se=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,yt=(e,t,o)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,F=(e,t)=>{for(var o in t||(t={}))ke.call(t,o)&&yt(e,o,t[o]);if(ft)for(var o of ft(t))Ie.call(t,o)&&yt(e,o,t[o]);return e},z=(e,t)=>Se(e,Ce(t));const W=N({open:!1}),Be=d(()=>_().map((e,t)=>[e,t])),je=d(()=>z(F({},G),{display:W().open?"block":"none"})),De={"font-size":"18px"},Ee=z(F({},q("24px")),{position:"flex","justify-self":"flex-end","align-self":"center"}),Ae=()=>{W(z(F({},W()),{open:!1}))},Te={margin:"5px 0 7px 0"},Ne={display:"flex",margin:"5px 0",width:"100%","font-size":"16px","align-items":"center"},Y={margin:"0 3px",width:"32px","font-size":"16px"},mt={margin:"0 6px 0 3px","font-size":"16px"},Z=(e,t,o)=>{_(_().map((n,r)=>r===e?z(F({},n),{[t]:o}):n))},$t=(e,t)=>o=>{const n=parseInt(o.target.value,10);if(Number.isNaN(n)){_(_());return}Z(t,e,n)},vt=(e,t)=>o=>{const{value:n}=o.target;if(n===""){_(_());return}Z(t,e,n)},Fe=e=>t=>{const o=parseInt(t.target.value,10);if(!o){_(_());return}Z(e,"step",o)},ze=z(F({},k("24px")),{"margin-left":"6px","font-size":"12px","background-color":"#fcc","border-color":"#c99"}),Me=e=>()=>{_(_().filter((t,o)=>o!==e))},Ve=([{fromDay:e,fromTime:t,toDay:o,toTime:n,step:r},l])=>g`    <div style=${Ne}>      Day      <input        type="number"        style=${Y}        onblur=${$t("fromDay",l)}        value=${e}        min="1"      />      <input        type="time"        style=${mt}        onblur=${vt("fromTime",l)}        value=${t}      />      <span style="word-break:keep-all">~ Day</span>      <input        type="number"        style=${Y}        onblur=${$t("toDay",l)}        value=${o}        min="1"      />      <input        type="time"        style=${mt}        onblur=${vt("toTime",l)}        value=${n}      />      /      <input        type="number"        style=${Y}        onblur=${Fe(l)}        value=${r}        min="1"      />      min      <button style=${ze} onclick=${Me(l)}>üóëÔ∏è</button>    </div>  `,Le=z(F({},k("24px")),{"align-self":"flex-end"}),Re=()=>{_([..._(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var We=()=>g`  <div style=${je}>    <div style=${Q}>      <div style="display:flex">        <div style=${De}>ÊôÇÂàª„Éó„É≠„ÉÉ„ÉàÁ∑®ÈõÜ</div>        <div style="display:flex;flex:auto;justify-content:flex-end">          <button style=${Ee} onclick=${Ae}>X</button>        </div>      </div>      <hr style=${Te} />      <div style="display:flex;flex-direction:column;margin:0 5px">        ${dt(Be,Ve)}        <button style=${Le} onclick=${Re}>+</button>      </div>    </div>  </div>`,Ue=Object.defineProperty,Xe=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,ht=(e,t,o)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,qe=(e,t)=>{for(var o in t||(t={}))Ke.call(t,o)&&ht(e,o,t[o]);if(gt)for(var o of gt(t))He.call(t,o)&&ht(e,o,t[o]);return e},Ge=(e,t)=>Xe(e,Je(t));const Qe=({color:e,name:t},o)=>{const n=75/o;return{width:`${n}vw`,"line-height":"36px","font-size":`min(24px, ${n/t.length}vw)`,"text-align":"center","border-radius":"12px 12px 0 0","background-color":`rgb(${e.join(",")})`,color:L(e)}},Ye=e=>{const t=e.target.getAttribute("data-id"),o=x().find(({id:n})=>n===t);!o||h({mode:"update",id:t,color:o.color,name:o.name})},Ze=(e,t)=>g`  <div style=${Qe(e,t)} onclick=${Ye} data-id=${e.id}>    ${e.name}  </div>`,to=d(()=>{const e=x(),{length:t}=e;return e.map(o=>Ze(o,t))}),eo={display:"flex","margin-left":"5vw",width:"95vw",height:"36px","align-items":"center"},oo={display:"flex",width:"10vw","font-size":"24px","justify-content":"center"},no={display:"flex",width:"75vw"},ro={display:"flex",width:"10vw","text-align":"left"},lo=Ge(qe({},k("min(max(4vw, 24px), 32px)")),{"align-self":"center","margin-left":"0.5vw"}),io=()=>{W({open:!0})},so=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],ao=()=>`c${Math.max(...x().map(({id:e})=>parseInt(e.slice(1),10)),0)+1}`,co=()=>{h({mode:"add",id:ao(),color:[...Array(3)].map(so),name:""})};var uo=()=>g`  <div style=${eo}>    <div style=${oo}>      <span style="cursor:default" onclick=${io}>‚è¨</span>    </div>    <div style=${no}>      ${to}    </div>    <div style=${ro}>      <button style=${lo} onclick=${co}>+</button>    </div>  </div>`,po=Object.defineProperty,fo=Object.defineProperties,yo=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,xt=(e,t,o)=>t in e?po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))bt.call(t,o)&&xt(e,o,t[o]);if(U)for(var o of U(t))_t.call(t,o)&&xt(e,o,t[o]);return e},S=(e,t)=>fo(e,yo(t)),mo=(e,t)=>{var o={};for(var n in e)bt.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&U)for(var n of U(e))t.indexOf(n)<0&&_t.call(e,n)&&(o[n]=e[n]);return o};const u=N({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),$o=d(()=>S(O({},G),{display:u().mode==="none"?"none":"block"})),vo=S(O({},Q),{width:"70%",height:"70%"}),go={"margin-left":"7px","font-size":"24px"},ho={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},bo=d(()=>ho[u().mode]),_o=q("36px"),xo=()=>u(S(O({},u()),{mode:"none"})),wo=(e,t,o)=>({"background-color":`rgb(${e.join(",")})`,color:L(e),opacity:t?1:.3,width:`${o}%`,"border-radius":"8px 8px 0 0","font-size":"16px","text-align":"center"}),Po=(e,t)=>()=>{const o=u(),n=t?o.columnIds.filter(r=>r!==e):[...o.columnIds,e];u(S(O({},o),{columnIds:n}))},Oo=(e,t)=>({id:o,name:n,color:r})=>{const l=e.includes(o);return g`    <div      style=${wo(r,l,100/t)}      onclick=${Po(o,l)}    >      ${n}    </div>  `},So=d(()=>{const{columnIds:e}=u(),t=x(),o=Oo(e,t.length);return g`    ${t.map(o)}  `}),Co={"margin-top":"5px","font-size":"14px"},ko={"margin-left":"5px",width:"30%"},Io=d(()=>u().day),Bo=e=>{u(S(O({},u()),{day:parseInt(e.target.value,10)||0}))},jo={"margin-top":"5px",width:"70%"},Do=d(()=>u().time),Eo=e=>{u(S(O({},u()),{time:e.target.value}))},Ao={width:"calc(100% - 12px)",height:"calc(70vh - 109px)",padding:"5px","font-size":"18px","background-color":"#eee",color:"black","font-family":"sans-serif",resize:"none"},To=d(()=>u().text),No=e=>{u(S(O({},u()),{text:e.target.value}))},Fo={"margin-top":"auto"},zo=S(O({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),Mo=()=>{const e=u(),{id:t}=e;w(w().filter(o=>o.id!==t)),u(S(O({},e),{mode:"none"}))},Vo=d(()=>u().mode==="update"?g`<button style=${zo} onclick=${Mo}>üóëÔ∏è</button>`:""),wt=d(()=>{const{columnIds:e,time:t}=u();return e.length===0||t===""}),Lo=d(()=>S(O({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9",opacity:wt()?.3:1})),Ro=()=>{const e=u(),{mode:t}=e,o=mo(e,["mode"]);w(t==="add"?[...w(),o]:w().map(n=>n.id===o.id?o:n)),u(S(O({},o),{mode:"none"}))};var Wo=()=>g`  <div style=${$o}>    <div style=${vo}>      <div style=${go}>        ${bo}        <button style=${_o} onclick=${xo}>X</button>      </div>      <hr />      <div style="display:flex">        ${So}      </div>      <div style="display:flex;flex:25% 75%">        <div style="display:flex;flex-direction:column">          <div style=${Co}>            Day            <input type="number" style=${ko} value=${Io} onchange=${Bo} />          </div>          <input type="time" style=${jo} value=${Do} onchange=${Eo} />          <div style=${Fo}>            ${Vo}            <button              style=${Lo}              onclick=${Ro}              disabled=${wt}            >‚úîÔ∏è</button>          </div>        </div>        <div style="width:100%">          <textarea style=${Ao} value=${To} onchange=${No}></textarea>        </div>      </div>    </div>  </div>`,Uo=Object.defineProperty,Xo=Object.defineProperties,Jo=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,Ko=Object.prototype.hasOwnProperty,Ho=Object.prototype.propertyIsEnumerable,Ot=(e,t,o)=>t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,St=(e,t)=>{for(var o in t||(t={}))Ko.call(t,o)&&Ot(e,o,t[o]);if(Pt)for(var o of Pt(t))Ho.call(t,o)&&Ot(e,o,t[o]);return e},qo=(e,t)=>Xo(e,Jo(t));const Ct=({day:e,time:t})=>[e,t].join(","),Go=e=>{const[t,o]=e.split(",");return[parseInt(t,10),o]},Qo=d(()=>[...[...w().map(e=>[Ct(e),[e]]),..._().flatMap(e=>[...Pe(e)]).map(([e,t])=>[Ct({day:e,time:t}),[]])].reduce((e,[t,o])=>(e.set(t,[...e.get(t)||[],...o]),e),new Map).entries()].map(([e,t])=>[...Go(e),t]).sort(([e,t],[o,n])=>e<o?-1:e>o?1:t<n?-1:t>n?1:0)),Yo=d(()=>{const e=x();return Qo().map(([t,o,n])=>[t,o,e.map(({id:r,color:l})=>({day:t,time:o,columnId:r,color:l,acts:n.flatMap(i=>i.columnIds.includes(r)?[qo(St({},i),{color:l})]:[])}))])}),Zo={"border-top":"1px dashed black","border-bottom":"1px dashed black"},tn={padding:"3px 0",width:"10vw","text-align":"center",color:"black"},en=d(()=>({display:"table-cell",padding:0,width:`${75/x().length}vw`,"text-align":"center","vertical-align":"top"})),on=e=>({display:"block",margin:"1px",padding:"2px",border:"1px solid black","border-radius":"3px","background-color":`rgba(${e.join(",")},0.5)`,color:L(e),"z-index":1}),nn=(e,t,o)=>()=>{u({mode:"add",id:st(),day:e,time:t,columnIds:[o],text:""})},rn=e=>t=>{u(St({mode:"update"},e)),t.stopPropagation()},ln=e=>g`  <div style=${on(e.color)} onclick=${rn(e)}>${e.text}</div>`,sn=({day:e,time:t,columnId:o,acts:n})=>g`  <td style=${en} onclick=${nn(e,t,o)}>    ${n.map(ln)}  </td>`,an=([,e,t])=>g`  <tr style=${Zo}>    <td style=${tn}>${e}</td>    ${t.map(sn)}  </tr>`,cn={display:"block",width:"85vw","max-height":"calc(96vh - 36px)",margin:"0 5vw","border-collapse":"collapse","overflow-y":"scroll","background-color":"#eee"};var un=()=>g`  <table style=${cn} cellSpacing="0">    <tbody>      ${dt(Yo,an)}    </tbody>  </table>`,pn=Object.defineProperty,dn=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,It=(e,t,o)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,$n=(e,t)=>{for(var o in t||(t={}))yn.call(t,o)&&It(e,o,t[o]);if(kt)for(var o of kt(t))mn.call(t,o)&&It(e,o,t[o]);return e},vn=(e,t)=>dn(e,fn(t));const gn=vn($n({},k("50px")),{position:"fixed",right:"2vw",bottom:"4vh"}),hn=()=>{const e=w(),t=st(),o=Math.max(1,...e.map(n=>n.day));u({mode:"add",id:t,columnIds:[],day:o,time:"12:00",text:""})};var bn=()=>g`  <button style=${gn} onclick=${hn}>+</button>`,_n=Object.defineProperty,xn=Object.defineProperties,wn=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable,jt=(e,t,o)=>t in e?_n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Sn=(e,t)=>{for(var o in t||(t={}))Pn.call(t,o)&&jt(e,o,t[o]);if(Bt)for(var o of Bt(t))On.call(t,o)&&jt(e,o,t[o]);return e},Cn=(e,t)=>xn(e,wn(t));const kn={position:"fixed",left:"2vw",bottom:"4vh"},Dt=Cn(Sn({},k("40px")),{display:"block","font-size":"20px","margin-top":"1vh"}),In=g`<input type="file" accept="application/json" onchange=${e=>{e.target.files[0].text().then(o=>{const{columns:n,activities:r,timePlots:l}=JSON.parse(o);x(n),w(r),_(l)}).catch(()=>{})}} />`,Bn=()=>In.click(),Et=g`<a download="tl-note.json" />`,jn=()=>{const e={columns:x(),activities:w(),timePlots:_()};Et.href=`data:application/json,${encodeURIComponent(JSON.stringify(e,null,2))}`,Et.click()};var Dn=()=>g`  <div style=${kn}>    <button style=${Dt} onclick=${Bn}>üìÇ</button>    <button style=${Dt} onclick=${jn}>üíæ</button>  </div>`;const En={margin:"2vh 0","font-size":"14px","font-family":"sans-serif"},An=()=>g`  <div style=${En}>    <${uo} />    <${un} />  </div>  <${bn} />  <${Dn} />  <${_e} />  <${We} />  <${Wo} />`;document.body.append(An())})();
