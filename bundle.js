(function(){"use strict";let Ot=[],f;function Bt(t){let e=f,o=()=>{};f=o,J(o);let n=t(()=>{N(o),f=void 0});return f=e,n}function It(t){let e=f;f=void 0;let o=t();return f=e,o}function A(t){function e(o){if(arguments.length===0)return f&&!e.__o.has(f)&&(e.__o.add(f),f.u.push(e)),t;t=o;let n=f;return f=void 0,e.o=new Set(e.__o),e.o.forEach(l=>l.i=!1),e.o.forEach(l=>{l.i||l()}),f=n,t}return e.$o=1,e.__o=new Set,e.t=Ot,e}function p(t,e){function o(){let l=f;return f&&f.__c.push(o),N(o),o.i=!0,f=o,e=t(e),f=l,e}function n(){return o.i?f&&o.u.forEach(l=>l()):e=o(),e}return t.s=o,J(o),o(),n.$o=1,n}function Dt(t){return f&&f.l.push(t),t}function Et(t){return p(t),()=>N(t.s)}function N(t){t.__c.forEach(N),t.u.forEach(e=>{e.__o.delete(t),e.o&&e.o.delete(t)}),t.l.forEach(e=>e()),J(t)}function J(t){t.u=[],t.__c=[],t.l=[]}let Z=(t,e,o,n)=>{let l={};for(let r=1;r<e.length;r++){let i=e[r],c=typeof i=="number"?o[i]:i,a=e[++r];if(a===1)n[0]=c;else if(a===3)n[1]=Object.assign(n[1]||{},c);else if(a===5)(n[1]=n[1]||{})[e[++r]]=c;else if(a===6){let g=e[++r],k=(n[1]=n[1]||{})[g],y=l[g];y||typeof c!="function"&&typeof k!="function"||(y=k&&[k]||[],n[1][g]=function(){let W="";for(var j=0;j<y.length;j++)W+=typeof y[j]=="function"?y[j].call(this):y[j];return W}),y?y.push(c):n[1][g]+=c+""}else if(a){let g=()=>t.apply(null,Z(t,c,o,["",null]));n.push(typeof n[0]=="function"?g:g())}else n.push(c)}return n},jt=function(t){let e,o,n=1,l="",r="",i=[0],c=a=>{n===1&&(a||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(a||l,0):n===3&&(a||l)?(i.push(a||l,1),n=2):n===2&&l==="..."&&a?i.push(a,3):n===2&&l&&!a?i.push(!0,5,l):n>=5&&((l||!a&&n===5)&&(i.push(l,n,o),n=6),a&&(i.push(a,n,o),n=6)),l=""};for(let a=0;a<t.length;a++){a&&(n===1&&c(),c(a));for(let g=0;g<t[a].length;g++)e=t[a][g],n===1?e==="<"?(c(),i=[i],n=3):l+=e:n===4?l==="--"&&e===">"?(n=1,l=""):l=e+l[0]:r?e===r?r="":l+=e:e==='"'||e==="'"?r=e:e===">"?(c(),n=1):n&&(e==="="?(n=5,o=l,l=""):e==="/"&&(n<5||t[a][g+1]===">")?(c(),n===3&&(i=i[0]),n=i,(i=i[0]).push(n,2),n=0):e===" "||e==="	"||e===`
`||e==="\r"?(c(),n=2):l+=e),n===3&&l==="!--"&&(n=4,i=i[0])}return c(),i},tt=new Map,At=function(t){let e=tt.get(this);return e||(e=new Map,tt.set(this,e)),e=Z(this,e.get(t)||(e.set(t,e=jt(t)),e),arguments,[]),e.length>1?e:e[0]},Tt=function(){let t=At.apply(this,arguments);if(t)return Array.isArray(t)?this(t):typeof t=="object"?t:this([t])};function Ft(){let t=Tt.bind(this);return(this.wrap||t).apply(t,arguments)}let s={},zt=[];function et(t){return this.t&&this.t[t.type](t)}s.h=(...t)=>{let e,o=n=>{if(n!=null)if(typeof n=="string")e?s.add(e,n):e=s.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))e||(e=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)e?s.add(e,n):e=n;else if(typeof n=="object")s.property(e,n,null,s.s);else if(typeof n=="function")if(e){let l=s.add(e,"");s.insert(e,n,l)}else e=n.apply(null,t.splice(1));else s.add(e,""+n)};return t.forEach(o),e},s.insert=(t,e,o,n,l)=>(t=o&&o.parentNode||t,l=l||n instanceof Node&&n,e===n||(n&&typeof n!="string"||!(typeof e=="string"||typeof e=="number"&&(e+=""))?typeof e=="function"?s.subscribe(()=>{n=s.insert(t,e.call({el:t,endMark:o}),o,n,l)}):(o?n&&(l||(l=n.o&&n.o.nextSibling||o.previousSibling),s.rm(t,l,o)):t.textContent="",n=null,e&&e!==!0&&(n=s.add(t,e,o))):(n!=null&&t.firstChild?o?(o.previousSibling||t.lastChild).data=e:t.firstChild.data=e:o?s.add(t,e,o):t.textContent=e,n=e)),n),s.property=(t,e,o,n,l)=>{if(e!=null)if(!o||o==="attrs"&&(n=!0))for(o in e)s.property(t,e[o],o,n,l);else o[0]!=="o"||o[1]!=="n"||e.$o?typeof e=="function"?s.subscribe(()=>{s.property(t,e.call({el:t,name:o}),o,n,l)}):l?t.style.setProperty(o,e):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?t.setAttribute(o,e):o==="style"?typeof e=="string"?t.style.cssText=e:s.property(t,e,null,n,!0):(o==="class"&&(o+="Name"),t[o]=e):((r,i,c)=>{i=i.slice(2).toLowerCase(),c?r.addEventListener(i,et):r.removeEventListener(i,et),(r.t||(r.t={}))[i]=c})(t,o,e)},s.add=(t,e,o)=>{let n=(l=>{const{childNodes:r}=l;if(r&&l.nodeType===11)return r.length<2?r[0]:{o:s.add(l,"",r[0])}})(e=(l=>typeof l=="string"?document.createTextNode(l):l instanceof Node?l:s.h(zt,l))(e))||e;return t.insertBefore(e,o&&o.parentNode&&o),n},s.rm=(t,e,o)=>{for(;e&&e!==o;){let n=e.nextSibling;t===e.parentNode&&t.removeChild(e),e=n}},s.subscribe=Et,s.cleanup=Dt,s.root=Bt,s.sample=It,s.hs=(...t)=>{let e=s.s;s.s=!0;let o=ot(...t);return s.s=e,o};let ot=(...t)=>s.h.apply(s.h,t),v=(...t)=>Ft.apply(ot,t);const P=t=>` width:${t};height:${t};font-size:calc(${t} * 0.8);padding:0;border:2px solid #99c;border-radius:50%;background-color:#ccf;color:#339;`,K=t=>` ${P(t)} position:absolute;right:7px;font-size:12px;background-color:#ccc;border-color:#999;`,H=" position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0, 0, 0, 0.6);font-family:sans-serif;font-size:24px;",q=" position:absolute;top:50vh;left:50vw;transform:translate(-50%, -50%);border-radius:12px;padding:12px;background-color:white;",w=A([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),M=([t,e,o])=>t+e+o<384?"white":"black",_=A([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),nt=p(()=>`a${Math.max(0,..._().map(({id:t})=>parseInt(t.slice(1),10)))+1}`);var Nt=Object.defineProperty,Mt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,it=(t,e,o)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,T=(t,e)=>{for(var o in e||(e={}))lt.call(e,o)&&it(t,o,e[o]);if(V)for(var o of V(e))rt.call(e,o)&&it(t,o,e[o]);return t},z=(t,e)=>Mt(t,Vt(e)),Lt=(t,e)=>{var o={};for(var n in t)lt.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&V)for(var n of V(t))e.indexOf(n)<0&&rt.call(t,n)&&(o[n]=t[n]);return o};const h=A({mode:"none",id:"",color:[0,0,0],name:""}),Rt=p(()=>` ${H} display:${h().mode==="none"?"none":"block"};`),Wt=" font-size:18px;",Ut={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},Xt=p(()=>Ut[h().mode]),Jt=K("24px"),Kt=()=>{h(z(T({},h()),{mode:"none"}))},Ht=" margin:5px 0 7px 0;",st=p(()=>`#${h().color.map(t=>t.toString(16).padStart(2,"0")).join("")}`),qt=p(()=>h().name),Gt=" width:24px;height:24px;padding:0;border-radius:12px;background-color:transparent;",Qt=t=>{const[e,o,n,l,r,i]=t.target.value.slice(1).split(""),c=[e+o,n+l,r+i].map(a=>parseInt(a,16));h(z(T({},h()),{color:c}))},Yt=p(()=>` margin-left:5px;padding:0;width:20vw;font-size:24px;line-height:24px;text-align:center;background-color:${st()};color:${M(h().color)};`),Zt=t=>{h(z(T({},h()),{name:t.target.value}))},te=" margin-top:7px;",ee=` ${P("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,oe=()=>{const t=h();w(w().filter(({id:e})=>e!==t.id)),_(_().flatMap(e=>{const{columnIds:o}=e;return o.length===1&&o[0]===t.id?[]:[z(T({},e),{columnIds:o.filter(n=>n!==t.id)})]})),h(z(T({},t),{mode:"none"}))},ne=p(()=>h().mode==="update"&&v`<button style=${ee} onclick=${oe}>ğŸ—‘ï¸</button>`),le=` ${P("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;`,re=()=>{const t=h(),{mode:e}=t,o=Lt(t,["mode"]),n=w();w(e==="add"?[...n,o]:n.map(l=>l.id===o.id?o:l)),h(T({mode:"none"},o))};var ie=()=>v`<div style=${Rt}><div style=${q}><div style="display:flex"><div style=${Wt}>${Xt}</div><button style=${Jt} onclick=${Kt}>X</button></div><hr style=${Ht} /><div><input type="color" value=${st} style=${Gt} onchange=${Qt} /><input type="text" value=${qt} style=${Yt} onchange=${Zt} /></div><div style=${te}>${ne}<button style=${le} onclick=${re}>âœ”ï¸</button></div></div></div>`;function at(t,e,o){const{root:n,subscribe:l,sample:r,cleanup:i}=s;o==null&&(o=!e.$t);let c=s.h([]),a=s.add(c,""),g=new Map,k=new Map,y=new Set;function W(b,B){if(b==null)return;let O=k.get(b);return B===1?(y.delete(b),O||(O=o?n(m=>(g.set(b,m),e(b.$v||b))):e(b.$v||b),O.nodeType===11&&(O=(m=>{const{childNodes:$}=m,{length:C}=$;if(C<2)return $[0];let S=Array.from($);return{nodeType:111,t:S[0],o:S[C-1],l(){if($.length!==C){let F=0;for(;F<C;)m.appendChild(S[F++])}return m}}})(O)||O),k.set(b,O))):B===-1&&y.add(b),((m,$)=>m.nodeType===111?1/$<0?$?s.rm(m.t.parentNode,m.t.nextSibling,m.o.nextSibling)||m.t:m.o:$?m.l():m.t:m)(O,B)}function j(b){let B=g.get(b);B&&(B(),g.delete(b)),k.delete(b)}return i(l(b=>{let B=t();return r(()=>{y.clear();let O=Array.from(function(m,$,C,S,F){let Pt=new Map,kt=new Map,d,I;for(d=0;d<$.length;d++)Pt.set($[d],d);for(d=0;d<C.length;d++)kt.set(C[d],d);for(d=I=0;d!==$.length||I!==C.length;){var Y=$[d],U=C[I];if(Y===null)d++;else if(C.length<=I)m.removeChild(S($[d],-1)),d++;else if($.length<=d)m.insertBefore(S(U,1),S($[d],0)||F),I++;else if(Y===U)d++,I++;else{var Yo=kt.get(Y),X=Pt.get(U);Yo===void 0?(m.removeChild(S($[d],-1)),d++):X===void 0?(m.insertBefore(S(U,1),S($[d],0)||F),I++):(m.insertBefore(S($[X],1),S($[d],0)||F),$[X]=null,X>d+1&&d++,I++)}}return C}(a.parentNode,b||[],B,W,a));return y.forEach(j),O})})),i(function(){g.forEach(b=>b()),g.clear(),k.clear(),y.clear()}),c}var x=A([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const se=(t,e)=>{const{length:o}=t;for(let n=0;n<o;n+=1){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},ae=(t,e)=>`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`;function*ce({fromDay:t,fromTime:e,toDay:o,toTime:n,step:l}){let r=t,[i,c]=e.split(":").map(y=>parseInt(y,10));const[a,g]=n.split(":").map(y=>parseInt(y,10)),k=[o,a,g];for(;se([r,i,c],k)<=0;){yield[r,ae(i,c)];const y=Math.floor((c+l)/60);r+=Math.floor((i+y)/24),i=(i+y)%24,c=(c+l)%60}}var ue=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ut=(t,e,o)=>e in t?ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,dt=(t,e)=>{for(var o in e||(e={}))fe.call(e,o)&&ut(t,o,e[o]);if(ct)for(var o of ct(e))ye.call(e,o)&&ut(t,o,e[o]);return t},pt=(t,e)=>de(t,pe(e));const L=A({open:!1}),me=p(()=>x().map((t,e)=>[t,e])),$e=p(()=>` ${H} display:${L().open?"block":"none"};`),ge=" font-size:18px;",ve=` ${K("24px")} position:flex;justify-self:flex-end;align-self:center;`,he=()=>{L(pt(dt({},L()),{open:!1}))},be=" margin:5px 0 7px 0;",xe=" display:flex;margin:5px 0;width:100%;font-size:16px;align-items:center;",G=" margin:0 3px;width:32px;font-size:16px;",ft=" margin:0 6px 0 3px;font-size:16px;font-family:sans-serif;",Q=(t,e,o)=>{x(x().map((n,l)=>l===t?pt(dt({},n),{[e]:o}):n))},yt=(t,e)=>o=>{const n=parseInt(o.target.value,10);if(Number.isNaN(n)){x(x());return}Q(e,t,n)},mt=(t,e)=>o=>{const{value:n}=o.target;if(n===""){x(x());return}Q(e,t,n)},we=t=>e=>{const o=parseInt(e.target.value,10);if(!o){x(x());return}Q(t,"step",o)},_e=` ${P("24px")} margin-left:6px;font-size:12px;background-color:#fcc;border-color:#c99;`,Se=t=>()=>{x(x().filter((e,o)=>o!==t))},Ce=([{fromDay:t,fromTime:e,toDay:o,toTime:n,step:l},r])=>v`<div style=${xe}>Day<input type="number" style=${G} onblur=${yt("fromDay",r)} value=${t} min="1" /><input type="time" style=${ft} onblur=${mt("fromTime",r)} value=${e} /><span style="word-break:keep-all">~ Day</span><input type="number" style=${G} onblur=${yt("toDay",r)} value=${o} min="1" /><input type="time" style=${ft} onblur=${mt("toTime",r)} value=${n} />/<input type="number" style=${G} onblur=${we(r)} value=${l} min="1" />min<button style=${_e} onclick=${Se(r)}>ğŸ—‘ï¸</button></div>`,Pe=` ${P("24px")} align-self:flex-end;`,ke=()=>{x([...x(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var Oe=()=>v`<div style=${$e}><div style=${q}><div style="display:flex"><div style=${ge}>æ™‚åˆ»ãƒ—ãƒ­ãƒƒãƒˆç·¨é›†</div><div style="display:flex;flex:auto;justify-content:flex-end"><button style=${ve} onclick=${he}>X</button></div></div><hr style=${be} /><div style="display:flex;flex-direction:column;margin:0 5px">${at(me,Ce)}<button style=${Pe} onclick=${ke}>+</button></div></div></div>`;const Be=({color:t,name:e},o)=>{const n=75/o;return` width:${n}vw;line-height:36px;font-size:min(24px, ${n/e.length}vw);text-align:center;border-radius:12px 12px 0 0;background-color:rgb(${t.join(",")});color:${M(t)};`},Ie=t=>{const e=t.target.getAttribute("data-id"),o=w().find(({id:n})=>n===e);!o||h({mode:"update",id:e,color:o.color,name:o.name})},De=(t,e)=>v`<div style=${Be(t,e)} onclick=${Ie} data-id=${t.id}>${t.name}</div>`,Ee=p(()=>{const t=w(),{length:e}=t;return t.map(o=>De(o,e))}),je=" display:flex;margin-left:5vw;width:95vw;height:36px;align-items:center;",Ae=" display:flex;width:10vw;font-size:24px;justify-content:center;",Te=" display:flex;width:75vw;",Fe=" display:flex;width:10vw;text-align:left;",ze=` ${P("min(max(4vw, 24px), 32px)")} align-self:center;margin-left:0.5vw;`,Ne=()=>{L({open:!0})},Me=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],Ve=()=>`c${Math.max(...w().map(({id:t})=>parseInt(t.slice(1),10)),0)+1}`,Le=()=>{h({mode:"add",id:Ve(),color:[...Array(3)].map(Me),name:""})};var Re=()=>v`<div style=${je}><div style=${Ae}><span style="cursor:default" onclick=${Ne}>â¬</span></div><div style=${Te}>${Ee}</div><div style=${Fe}><button style=${ze} onclick=${Le}>+</button></div></div>`,We=Object.defineProperty,Ue=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,vt=(t,e,o)=>e in t?We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,D=(t,e)=>{for(var o in e||(e={}))$t.call(e,o)&&vt(t,o,e[o]);if(R)for(var o of R(e))gt.call(e,o)&&vt(t,o,e[o]);return t},E=(t,e)=>Ue(t,Xe(e)),Je=(t,e)=>{var o={};for(var n in t)$t.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&R)for(var n of R(t))e.indexOf(n)<0&&gt.call(t,n)&&(o[n]=t[n]);return o};const u=A({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),Ke=p(()=>` ${H} display:${u().mode==="none"?"none":"block"};`),He=` ${q} width:70%;height:70%;`,qe=" margin-left:7px;font-size:24px;",Ge={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},Qe=p(()=>Ge[u().mode]),Ye=K("36px"),Ze=()=>u(E(D({},u()),{mode:"none"})),to=(t,e,o)=>` background-color:rgb(${t.join(",")});color:${M(t)};opacity:${e?1:.3};width:${o}%;border-radius:8px 8px 0 0;font-size:16px;text-align:center;`,eo=(t,e)=>()=>{const o=u(),n=e?o.columnIds.filter(l=>l!==t):[...o.columnIds,t];u(E(D({},o),{columnIds:n}))},oo=(t,e)=>({id:o,name:n,color:l})=>{const r=t.includes(o);return v`<div style=${to(l,r,100/e)} onclick=${eo(o,r)} >${n}</div>`},no=p(()=>{const{columnIds:t}=u(),e=w(),o=oo(t,e.length);return v` ${e.map(o)} `}),lo=" margin-top:5px;font-size:14px;",ro=" margin-left:5px;width:30%;",io=p(()=>u().day),so=t=>{u(E(D({},u()),{day:parseInt(t.target.value,10)||0}))},ao=" margin-top:5px;width:70%;font-family:sans-serif;",co=p(()=>u().time),uo=t=>{u(E(D({},u()),{time:t.target.value}))},po=" width:calc(100% - 12px);height:calc(70vh - 109px);padding:5px;font-size:18px;background-color:#eee;color:black;font-family:sans-serif;resize:none;",fo=p(()=>u().text),yo=t=>{u(E(D({},u()),{text:t.target.value}))},mo={"margin-top":"auto"},$o=` ${P("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,go=()=>{const t=u(),{id:e}=t;_(_().filter(o=>o.id!==e)),u(E(D({},t),{mode:"none"}))},vo=p(()=>u().mode==="update"?v`<button style=${$o} onclick=${go}>ğŸ—‘ï¸</button>`:""),ht=p(()=>{const{columnIds:t,time:e}=u();return t.length===0||e===""}),ho=p(()=>` ${P("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;opacity:${ht()?.3:1};`),bo=()=>{const t=u(),{mode:e}=t,o=Je(t,["mode"]);_(e==="add"?[..._(),o]:_().map(n=>n.id===o.id?o:n)),u(E(D({},o),{mode:"none"}))};var xo=()=>v`<div style=${Ke}><div style=${He}><div style=${qe}>${Qe}<button style=${Ye} onclick=${Ze}>X</button></div><hr /><div style="display:flex">${no}</div><div style="display:flex;flex:25% 75%"><div style="display:flex;flex-direction:column"><div style=${lo}>Day<input type="number" style=${ro} value=${io} onchange=${so} /></div><input type="time" style=${ao} value=${co} onchange=${uo} /><div style=${mo}>${vo}<button style=${ho} onclick=${bo} disabled=${ht} >âœ”ï¸</button></div></div><div style="width:100%"><textarea style=${po} value=${fo} onchange=${yo}></textarea></div></div></div></div>`,wo=Object.defineProperty,_o=Object.defineProperties,So=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,xt=(t,e,o)=>e in t?wo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,wt=(t,e)=>{for(var o in e||(e={}))Co.call(e,o)&&xt(t,o,e[o]);if(bt)for(var o of bt(e))Po.call(e,o)&&xt(t,o,e[o]);return t},ko=(t,e)=>_o(t,So(e));const _t=({day:t,time:e})=>[t,e].join(","),Oo=t=>{const[e,o]=t.split(",");return[parseInt(e,10),o]},Bo=p(()=>[...[..._().map(t=>[_t(t),[t]]),...x().flatMap(t=>[...ce(t)]).map(([t,e])=>[_t({day:t,time:e}),[]])].reduce((t,[e,o])=>(t.set(e,[...t.get(e)||[],...o]),t),new Map).entries()].map(([t,e])=>[...Oo(t),e]).sort(([t,e],[o,n])=>t<o?-1:t>o?1:e<n?-1:e>n?1:0)),Io=p(()=>{const t=w();return Bo().map(([e,o,n])=>[e,o,t.map(({id:l,color:r})=>({day:e,time:o,columnId:l,color:r,acts:n.flatMap(i=>i.columnIds.includes(l)?[ko(wt({},i),{color:r})]:[])}))])}),Do=" border-top:1px dashed black;border-bottom:1px dashed black;",Eo=" padding:3px 0;width:10vw;text-align:center;color:black;",jo=p(()=>` display:table-cell;padding:0;width:${75/w().length}vw;text-align:center;vertical-align:top;`),Ao=t=>` display:block;min-height:21px;margin:1px;padding:2px;border:1px solid black;border-radius:3px;background-color:rgba(${t.join(",")},0.5);color:${M(t)};z-index:1;`,To=(t,e,o)=>()=>{u({mode:"add",id:nt(),day:t,time:e,columnIds:[o],text:""})},Fo=t=>e=>{u(wt({mode:"update"},t)),e.stopPropagation()},zo=t=>v`<div style=${Ao(t.color)} onclick=${Fo(t)}>${t.text}</div>`,No=({day:t,time:e,columnId:o,acts:n})=>v`<td style=${jo} onclick=${To(t,e,o)}>${n.map(zo)}</td>`,Mo=([,t,e])=>v`<tr style=${Do}><td style=${Eo}>${t}</td>${e.map(No)}</tr>`,Vo=" display:block;width:85vw;max-height:calc(96vh - 36px);margin:0 5vw;border-collapse:collapse;overflow-y:scroll;background-color:#eee;";var Lo=()=>v`<table style=${Vo} cellSpacing="0"><tbody>${at(Io,Mo)}</tbody></table>`;const Ro=` ${P("50px")} position:fixed;right:2vw;bottom:4vh;`,Wo=()=>{const t=_(),e=nt(),o=Math.max(1,...t.map(n=>n.day));u({mode:"add",id:e,columnIds:[],day:o,time:"12:00",text:""})};var Uo=()=>v`<button style=${Ro} onclick=${Wo}>+</button>`;const Xo=" position:fixed;left:2vw;bottom:4vh;",St=` ${P("40px")} display:block;font-size:20px;margin-top:1vh;`,Jo=v`<input type="file" accept="application/json" onchange=${t=>{t.target.files[0].text().then(o=>{const{columns:n,activities:l,timePlots:r}=JSON.parse(o);w(n),_(l),x(r)}).catch(()=>{})}} />`,Ko=()=>Jo.click(),Ct=v`<a download="tl-note.json" />`,Ho=()=>{const t={columns:w(),activities:_(),timePlots:x()};Ct.href=`data:application/json,${encodeURIComponent(JSON.stringify(t,null,2))}`,Ct.click()};var qo=()=>v`<div style=${Xo}><button style=${St} onclick=${Ko}>ğŸ“‚</button><button style=${St} onclick=${Ho}>ğŸ’¾</button></div>`;const Go=" margin:2vh 0;font-size:14px;font-family:sans-serif;",Qo=()=>v`<div style=${Go}><${Re} /><${Lo} /></div><${Uo} /><${qo} /><${ie} /><${Oe} /><${xo} />`;document.body.append(Qo())})();
