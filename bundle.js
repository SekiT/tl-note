(function(){"use strict";let Tt=[],d;function Nt(e){let t=d,o=()=>{};d=o,H(o);let n=e(()=>{V(o),d=void 0});return d=t,n}function Ft(e){let t=d;d=void 0;let o=e();return d=t,o}function N(e){function t(o){if(arguments.length===0)return d&&!t.__o.has(d)&&(t.__o.add(d),d.u.push(t)),e;e=o;let n=d;return d=void 0,t.o=new Set(t.__o),t.o.forEach(r=>r.i=!1),t.o.forEach(r=>{r.i||r()}),d=n,e}return t.$o=1,t.__o=new Set,t.t=Tt,t}function f(e,t){function o(){let r=d;return d&&d.__c.push(o),V(o),o.i=!0,d=o,t=e(t),d=r,t}function n(){return o.i?d&&o.u.forEach(r=>r()):t=o(),t}return e.s=o,H(o),o(),n.$o=1,n}function zt(e){return d&&d.l.push(e),e}function Mt(e){return f(e),()=>V(e.s)}function V(e){e.__c.forEach(V),e.u.forEach(t=>{t.__o.delete(e),t.o&&t.o.delete(e)}),e.l.forEach(t=>t()),H(e)}function H(e){e.u=[],e.__c=[],e.l=[]}let ot=(e,t,o,n)=>{let r={};for(let l=1;l<t.length;l++){let s=t[l],c=typeof s=="number"?o[s]:s,a=t[++l];if(a===1)n[0]=c;else if(a===3)n[1]=Object.assign(n[1]||{},c);else if(a===5)(n[1]=n[1]||{})[t[++l]]=c;else if(a===6){let v=t[++l],I=(n[1]=n[1]||{})[v],y=r[v];y||typeof c!="function"&&typeof I!="function"||(y=I&&[I]||[],n[1][v]=function(){let X="";for(var T=0;T<y.length;T++)X+=typeof y[T]=="function"?y[T].call(this):y[T];return X}),y?y.push(c):n[1][v]+=c+""}else if(a){let v=()=>e.apply(null,ot(e,c,o,["",null]));n.push(typeof n[0]=="function"?v:v())}else n.push(c)}return n},Vt=function(e){let t,o,n=1,r="",l="",s=[0],c=a=>{n===1&&(a||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(a||r,0):n===3&&(a||r)?(s.push(a||r,1),n=2):n===2&&r==="..."&&a?s.push(a,3):n===2&&r&&!a?s.push(!0,5,r):n>=5&&((r||!a&&n===5)&&(s.push(r,n,o),n=6),a&&(s.push(a,n,o),n=6)),r=""};for(let a=0;a<e.length;a++){a&&(n===1&&c(),c(a));for(let v=0;v<e[a].length;v++)t=e[a][v],n===1?t==="<"?(c(),s=[s],n=3):r+=t:n===4?r==="--"&&t===">"?(n=1,r=""):r=t+r[0]:l?t===l?l="":r+=t:t==='"'||t==="'"?l=t:t===">"?(c(),n=1):n&&(t==="="?(n=5,o=r,r=""):t==="/"&&(n<5||e[a][v+1]===">")?(c(),n===3&&(s=s[0]),n=s,(s=s[0]).push(n,2),n=0):t===" "||t==="	"||t===`
`||t==="\r"?(c(),n=2):r+=t),n===3&&r==="!--"&&(n=4,s=s[0])}return c(),s},nt=new Map,Lt=function(e){let t=nt.get(this);return t||(t=new Map,nt.set(this,t)),t=ot(this,t.get(e)||(t.set(e,t=Vt(e)),t),arguments,[]),t.length>1?t:t[0]},Rt=function(){let e=Lt.apply(this,arguments);if(e)return Array.isArray(e)?this(e):typeof e=="object"?e:this([e])};function Wt(){let e=Rt.bind(this);return(this.wrap||e).apply(e,arguments)}let i={},Ut=[];function rt(e){return this.t&&this.t[e.type](e)}i.h=(...e)=>{let t,o=n=>{if(n!=null)if(typeof n=="string")t?i.add(t,n):t=i.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))t||(t=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)t?i.add(t,n):t=n;else if(typeof n=="object")i.property(t,n,null,i.s);else if(typeof n=="function")if(t){let r=i.add(t,"");i.insert(t,n,r)}else t=n.apply(null,e.splice(1));else i.add(t,""+n)};return e.forEach(o),t},i.insert=(e,t,o,n,r)=>(e=o&&o.parentNode||e,r=r||n instanceof Node&&n,t===n||(n&&typeof n!="string"||!(typeof t=="string"||typeof t=="number"&&(t+=""))?typeof t=="function"?i.subscribe(()=>{n=i.insert(e,t.call({el:e,endMark:o}),o,n,r)}):(o?n&&(r||(r=n.o&&n.o.nextSibling||o.previousSibling),i.rm(e,r,o)):e.textContent="",n=null,t&&t!==!0&&(n=i.add(e,t,o))):(n!=null&&e.firstChild?o?(o.previousSibling||e.lastChild).data=t:e.firstChild.data=t:o?i.add(e,t,o):e.textContent=t,n=t)),n),i.property=(e,t,o,n,r)=>{if(t!=null)if(!o||o==="attrs"&&(n=!0))for(o in t)i.property(e,t[o],o,n,r);else o[0]!=="o"||o[1]!=="n"||t.$o?typeof t=="function"?i.subscribe(()=>{i.property(e,t.call({el:e,name:o}),o,n,r)}):r?e.style.setProperty(o,t):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?e.setAttribute(o,t):o==="style"?typeof t=="string"?e.style.cssText=t:i.property(e,t,null,n,!0):(o==="class"&&(o+="Name"),e[o]=t):((l,s,c)=>{s=s.slice(2).toLowerCase(),c?l.addEventListener(s,rt):l.removeEventListener(s,rt),(l.t||(l.t={}))[s]=c})(e,o,t)},i.add=(e,t,o)=>{let n=(r=>{const{childNodes:l}=r;if(l&&r.nodeType===11)return l.length<2?l[0]:{o:i.add(r,"",l[0])}})(t=(r=>typeof r=="string"?document.createTextNode(r):r instanceof Node?r:i.h(Ut,r))(t))||t;return e.insertBefore(t,o&&o.parentNode&&o),n},i.rm=(e,t,o)=>{for(;t&&t!==o;){let n=t.nextSibling;e===t.parentNode&&e.removeChild(t),t=n}},i.subscribe=Mt,i.cleanup=zt,i.root=Nt,i.sample=Ft,i.hs=(...e)=>{let t=i.s;i.s=!0;let o=lt(...e);return i.s=t,o};let lt=(...e)=>i.h.apply(i.h,e),g=(...e)=>Wt.apply(lt,e);var Xt=Object.defineProperty,Jt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,st=(e,t,o)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Gt=(e,t)=>{for(var o in t||(t={}))Ht.call(t,o)&&st(e,o,t[o]);if(it)for(var o of it(t))qt.call(t,o)&&st(e,o,t[o]);return e},Qt=(e,t)=>Jt(e,Kt(t));const k=e=>({width:e,height:e,"font-size":`calc(${e} * 0.8)`,padding:0,border:"2px solid #99c","border-radius":"50%","background-color":"#ccf",color:"#339"}),q=e=>Qt(Gt({},k(e)),{position:"absolute",right:"7px","font-size":"12px","background-color":"#ccc","border-color":"#999"}),G={position:"fixed",top:0,left:0,width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.6)","font-family":"sans-serif","font-size":"24px"},Q={position:"absolute",top:"50vh",left:"50vw",transform:"translate(-50%, -50%)","border-radius":"12px",padding:"12px","background-color":"white"},x=N([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),L=([e,t,o])=>e+t+o<384?"white":"black",w=N([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),at=f(()=>`a${Math.max(0,...w().map(({id:e})=>parseInt(e.slice(1),10)))+1}`);var Yt=Object.defineProperty,Zt=Object.defineProperties,te=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,pt=(e,t,o)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))ct.call(t,o)&&pt(e,o,t[o]);if(R)for(var o of R(t))ut.call(t,o)&&pt(e,o,t[o]);return e},E=(e,t)=>Zt(e,te(t)),ee=(e,t)=>{var o={};for(var n in e)ct.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&R)for(var n of R(e))t.indexOf(n)<0&&ut.call(e,n)&&(o[n]=e[n]);return o};const h=N({mode:"none",id:"",color:[0,0,0],name:""}),oe=f(()=>E(j({},G),{display:h().mode==="none"?"none":"block"})),ne={"font-size":"18px"},re={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},le=f(()=>re[h().mode]),ie=q("24px"),se=()=>{h(E(j({},h()),{mode:"none"}))},ae={margin:"5px 0 7px 0"},dt=f(()=>`#${h().color.map(e=>e.toString(16).padStart(2,"0")).join("")}`),ce=f(()=>h().name),ue={width:"24px",height:"24px",padding:0,"border-radius":"12px","background-color":"transparent"},pe=e=>{const[t,o,n,r,l,s]=e.target.value.slice(1).split(""),c=[t+o,n+r,l+s].map(a=>parseInt(a,16));h(E(j({},h()),{color:c}))},de=f(()=>({"margin-left":"5px",padding:0,width:"20vw","font-size":"24px","line-height":"24px","text-align":"center","background-color":dt(),color:L(h().color)})),fe=e=>{h(E(j({},h()),{name:e.target.value}))},ye={"margin-top":"7px"},me=E(j({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),$e=()=>{const e=h();x(x().filter(({id:t})=>t!==e.id)),w(w().flatMap(t=>{const{columnIds:o}=t;return o.length===1&&o[0]===e.id?[]:[E(j({},t),{columnIds:o.filter(n=>n!==e.id)})]})),h(E(j({},e),{mode:"none"}))},ve=f(()=>h().mode==="update"&&g`<button style=${me} onclick=${$e}>üóëÔ∏è</button>`),ge=E(j({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9"}),he=()=>{const e=h(),{mode:t}=e,o=ee(e,["mode"]),n=x();x(t==="add"?[...n,o]:n.map(r=>r.id===o.id?o:r)),h(j({mode:"none"},o))};var be=()=>g`  <div style=${oe}>    <div style=${Q}>      <div style="display:flex">        <div style=${ne}>${le}</div>        <button style=${ie} onclick=${se}>X</button>      </div>      <hr style=${ae} />      <div>        <input type="color" value=${dt} style=${ue} onchange=${pe} />        <input type="text" value=${ce} style=${de} onchange=${fe} />      </div>      <div style=${ye}>        ${ve}        <button style=${ge} onclick=${he}>‚úîÔ∏è</button>      </div>    </div>  </div>`;function Y(e,t,o){const{root:n,subscribe:r,sample:l,cleanup:s}=i;o==null&&(o=!t.$t);let c=i.h([]),a=i.add(c,""),v=new Map,I=new Map,y=new Set;function X(b,D){if(b==null)return;let B=I.get(b);return D===1?(y.delete(b),B||(B=o?n(m=>(v.set(b,m),t(b.$v||b))):t(b.$v||b),B.nodeType===11&&(B=(m=>{const{childNodes:$}=m,{length:C}=$;if(C<2)return $[0];let P=Array.from($);return{nodeType:111,t:P[0],o:P[C-1],l(){if($.length!==C){let M=0;for(;M<C;)m.appendChild(P[M++])}return m}}})(B)||B),I.set(b,B))):D===-1&&y.add(b),((m,$)=>m.nodeType===111?1/$<0?$?i.rm(m.t.parentNode,m.t.nextSibling,m.o.nextSibling)||m.t:m.o:$?m.l():m.t:m)(B,D)}function T(b){let D=v.get(b);D&&(D(),v.delete(b)),I.delete(b)}return s(r(b=>{let D=e();return l(()=>{y.clear();let B=Array.from(function(m,$,C,P,M){let Dt=new Map,At=new Map,p,A;for(p=0;p<$.length;p++)Dt.set($[p],p);for(p=0;p<C.length;p++)At.set(C[p],p);for(p=A=0;p!==$.length||A!==C.length;){var et=$[p],J=C[A];if(et===null)p++;else if(C.length<=A)m.removeChild(P($[p],-1)),p++;else if($.length<=p)m.insertBefore(P(J,1),P($[p],0)||M),A++;else if(et===J)p++,A++;else{var In=At.get(et),K=Dt.get(J);In===void 0?(m.removeChild(P($[p],-1)),p++):K===void 0?(m.insertBefore(P(J,1),P($[p],0)||M),A++):(m.insertBefore(P($[K],1),P($[p],0)||M),$[K]=null,K>p+1&&p++,A++)}}return C}(a.parentNode,b||[],D,X,a));return y.forEach(T),B})})),s(function(){v.forEach(b=>b()),v.clear(),I.clear(),y.clear()}),c}var _=N([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const _e=(e,t)=>{const{length:o}=e;for(let n=0;n<o;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},xe=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;function*we({fromDay:e,fromTime:t,toDay:o,toTime:n,step:r}){let l=e,[s,c]=t.split(":").map(y=>parseInt(y,10));const[a,v]=n.split(":").map(y=>parseInt(y,10)),I=[o,a,v];for(;_e([l,s,c],I)<=0;){yield[l,xe(s,c)];const y=Math.floor((c+r)/60);l+=Math.floor((s+y)/24),s=(s+y)%24,c=(c+r)%60}}var Pe=Object.defineProperty,Oe=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,yt=(e,t,o)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,F=(e,t)=>{for(var o in t||(t={}))Ce.call(t,o)&&yt(e,o,t[o]);if(ft)for(var o of ft(t))ke.call(t,o)&&yt(e,o,t[o]);return e},z=(e,t)=>Oe(e,Se(t));const W=N({open:!1}),Ie=f(()=>_().map((e,t)=>[e,t])),Be=f(()=>z(F({},G),{display:W().open?"block":"none"})),je={"font-size":"18px"},Ee=z(F({},q("24px")),{position:"flex","justify-self":"flex-end","align-self":"center"}),De=()=>{W(z(F({},W()),{open:!1}))},Ae={margin:"5px 0 7px 0"},Te={display:"flex",margin:"5px 0",width:"100%","font-size":"16px","align-items":"center"},Z={margin:"0 3px",width:"32px","font-size":"16px"},mt={margin:"0 6px 0 3px","font-size":"16px"},tt=(e,t,o)=>{_(_().map((n,r)=>r===e?z(F({},n),{[t]:o}):n))},$t=(e,t)=>o=>{const n=parseInt(o.target.value,10);if(Number.isNaN(n)){_(_());return}tt(t,e,n)},vt=(e,t)=>o=>{const{value:n}=o.target;if(n===""){_(_());return}tt(t,e,n)},Ne=e=>t=>{const o=parseInt(t.target.value,10);if(!o){_(_());return}tt(e,"step",o)},Fe=z(F({},k("24px")),{"margin-left":"6px","font-size":"12px","background-color":"#fcc","border-color":"#c99"}),ze=e=>()=>{_(_().filter((t,o)=>o!==e))},Me=([{fromDay:e,fromTime:t,toDay:o,toTime:n,step:r},l])=>g`    <div style=${Te}>      Day      <input        type="number"        style=${Z}        onblur=${$t("fromDay",l)}        value=${e}        min="1"      />      <input        type="time"        style=${mt}        onblur=${vt("fromTime",l)}        value=${t}      />      <span style="word-break:keep-all">~ Day</span>      <input        type="number"        style=${Z}        onblur=${$t("toDay",l)}        value=${o}        min="1"      />      <input        type="time"        style=${mt}        onblur=${vt("toTime",l)}        value=${n}      />      /      <input        type="number"        style=${Z}        onblur=${Ne(l)}        value=${r}        min="1"      />      min      <button style=${Fe} onclick=${ze(l)}>üóëÔ∏è</button>    </div>  `,Ve=z(F({},k("24px")),{"align-self":"flex-end"}),Le=()=>{_([..._(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var Re=()=>g`  <div style=${Be}>    <div style=${Q}>      <div style="display:flex">        <div style=${je}>ÊôÇÂàª„Éó„É≠„ÉÉ„ÉàÁ∑®ÈõÜ</div>        <div style="display:flex;flex:auto;justify-content:flex-end">          <button style=${Ee} onclick=${De}>X</button>        </div>      </div>      <hr style=${Ae} />      <div style="display:flex;flex-direction:column;margin:0 5px">        ${Y(Ie,Me)}        <button style=${Ve} onclick=${Le}>+</button>      </div>    </div>  </div>`,We=Object.defineProperty,Ue=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,ht=(e,t,o)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,He=(e,t)=>{for(var o in t||(t={}))Je.call(t,o)&&ht(e,o,t[o]);if(gt)for(var o of gt(t))Ke.call(t,o)&&ht(e,o,t[o]);return e},qe=(e,t)=>Ue(e,Xe(t));const Ge=({color:e,name:t},o)=>{const n=75/o;return{width:`${n}vw`,"line-height":"36px","font-size":`min(24px, ${n/t.length}vw)`,"text-align":"center","border-radius":"12px 12px 0 0","background-color":`rgb(${e.join(",")})`,color:L(e)}},Qe=e=>{const t=e.target.getAttribute("data-id"),o=x().find(({id:n})=>n===t);!o||h({mode:"update",id:t,color:o.color,name:o.name})},Ye=(e,t)=>g`  <div style=${Ge(e,t)} onclick=${Qe} data-id=${e.id}>    ${e.name}  </div>`,Ze=f(()=>{const e=x(),{length:t}=e;return e.map(o=>Ye(o,t))}),to={display:"flex","margin-left":"5vw",width:"95vw",height:"36px","align-items":"center"},eo={display:"flex",width:"10vw","font-size":"24px","justify-content":"center"},oo={display:"flex",width:"75vw"},no={display:"flex",width:"10vw","text-align":"left"},ro=qe(He({},k("min(max(4vw, 24px), 32px)")),{"align-self":"center","margin-left":"0.5vw"}),lo=()=>{W({open:!0})},io=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],so=()=>`c${Math.max(...x().map(({id:e})=>parseInt(e.slice(1),10)),0)+1}`,ao=()=>{h({mode:"add",id:so(),color:[...Array(3)].map(io),name:""})};var co=()=>g`  <div style=${to}>    <div style=${eo}>      <span style="cursor:default" onclick=${lo}>‚è¨</span>    </div>    <div style=${oo}>      ${Ze}    </div>    <div style=${no}>      <button style=${ro} onclick=${ao}>+</button>    </div>  </div>`,uo=Object.defineProperty,po=Object.defineProperties,fo=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,xt=(e,t,o)=>t in e?uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))bt.call(t,o)&&xt(e,o,t[o]);if(U)for(var o of U(t))_t.call(t,o)&&xt(e,o,t[o]);return e},S=(e,t)=>po(e,fo(t)),yo=(e,t)=>{var o={};for(var n in e)bt.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&U)for(var n of U(e))t.indexOf(n)<0&&_t.call(e,n)&&(o[n]=e[n]);return o};const u=N({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),mo=f(()=>S(O({},G),{display:u().mode==="none"?"none":"block"})),$o=S(O({},Q),{width:"70%",height:"70%"}),vo={"margin-left":"7px","font-size":"24px"},go={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},ho=f(()=>go[u().mode]),bo=q("36px"),_o=()=>u(S(O({},u()),{mode:"none"})),xo=(e,t,o)=>({"background-color":`rgb(${e.join(",")})`,color:L(e),opacity:t?1:.3,width:`${o}%`,"border-radius":"8px 8px 0 0","font-size":"16px","text-align":"center"}),wo=(e,t)=>()=>{const o=u(),n=t?o.columnIds.filter(r=>r!==e):[...o.columnIds,e];u(S(O({},o),{columnIds:n}))},Po=(e,t)=>({id:o,name:n,color:r})=>{const l=e.includes(o);return g`    <div      style=${xo(r,l,100/t)}      onclick=${wo(o,l)}    >      ${n}    </div>  `},Oo=f(()=>{const{columnIds:e}=u(),t=x(),o=Po(e,t.length);return g`    ${t.map(o)}  `}),So={"margin-top":"5px","font-size":"14px"},Co={"margin-left":"5px",width:"30%"},ko=f(()=>u().day),Io=e=>{u(S(O({},u()),{day:parseInt(e.target.value,10)||0}))},Bo={"margin-top":"5px",width:"70%"},jo=f(()=>u().time),Eo=e=>{u(S(O({},u()),{time:e.target.value}))},Do={width:"calc(100% - 12px)",height:"calc(70vh - 109px)",padding:"5px","font-size":"18px","background-color":"#eee",color:"black","font-family":"sans-serif",resize:"none"},Ao=f(()=>u().text),To=e=>{u(S(O({},u()),{text:e.target.value}))},No={"margin-top":"auto"},Fo=S(O({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),zo=()=>{const e=u(),{id:t}=e;w(w().filter(o=>o.id!==t)),u(S(O({},e),{mode:"none"}))},Mo=f(()=>u().mode==="update"?g`<button style=${Fo} onclick=${zo}>üóëÔ∏è</button>`:""),wt=f(()=>{const{columnIds:e,time:t}=u();return e.length===0||t===""}),Vo=f(()=>S(O({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9",opacity:wt()?.3:1})),Lo=()=>{const e=u(),{mode:t}=e,o=yo(e,["mode"]);w(t==="add"?[...w(),o]:w().map(n=>n.id===o.id?o:n)),u(S(O({},o),{mode:"none"}))};var Ro=()=>g`  <div style=${mo}>    <div style=${$o}>      <div style=${vo}>        ${ho}        <button style=${bo} onclick=${_o}>X</button>      </div>      <hr />      <div style="display:flex">        ${Oo}      </div>      <div style="display:flex;flex:25% 75%">        <div style="display:flex;flex-direction:column">          <div style=${So}>            Day            <input type="number" style=${Co} value=${ko} onchange=${Io} />          </div>          <input type="time" style=${Bo} value=${jo} onchange=${Eo} />          <div style=${No}>            ${Mo}            <button              style=${Vo}              onclick=${Lo}              disabled=${wt}            >‚úîÔ∏è</button>          </div>        </div>        <div style="width:100%">          <textarea style=${Do} value=${Ao} onchange=${To}></textarea>        </div>      </div>    </div>  </div>`,Wo=Object.defineProperty,Pt=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,Ot=(e,t,o)=>t in e?Wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Jo=(e,t)=>{for(var o in t||(t={}))Uo.call(t,o)&&Ot(e,o,t[o]);if(Pt)for(var o of Pt(t))Xo.call(t,o)&&Ot(e,o,t[o]);return e};const St=({day:e,time:t})=>[e,t].join(","),Ko=e=>{const[t,o]=e.split(",");return[parseInt(t,10),o]},Ho=f(()=>[...[...w().map(e=>[St(e),[e]]),..._().flatMap(e=>[...we(e)]).map(([e,t])=>[St({day:e,time:t}),[]])].reduce((e,[t,o])=>(e.set(t,[...e.get(t)||[],...o]),e),new Map).entries()].map(([e,t])=>[...Ko(e),t]).sort(([e,t],[o,n])=>e<o?-1:e>o?1:t<n?-1:t>n?1:0)),qo={"border-top":"1px dashed black","border-bottom":"1px dashed black"},Go={padding:"3px 0",width:"10vw","text-align":"center",color:"black"},Qo=f(()=>({display:"table-cell",padding:0,width:`${75/x().length}vw`,"text-align":"center","vertical-align":"top"})),Yo=e=>({display:"block",margin:"1px",padding:"2px",border:"1px solid black","border-radius":"3px","background-color":`rgba(${e.join(",")},0.5)`,color:L(e),"z-index":1}),Zo=(e,t,o)=>()=>{u({mode:"add",id:at(),day:e,time:t,columnIds:[o],text:""})},tn=e=>t=>{u(Jo({mode:"update"},e)),t.stopPropagation()},en=([e,t,o])=>g`  <tr style=${qo}>    <td style=${Go}>${t}</td>    ${Y(x,({id:n,color:r})=>g`
      <td style=${Qo} onclick=${Zo(e,t,n)}>
        ${o.map(l=>l.columnIds.includes(n)?g`          <div style=${Yo(r)} onclick=${tn(l)} data-id=${l.id}>${l.text}</div>        `:"")}
      </td>
    `)}  </tr>`,on={display:"block",width:"85vw","max-height":"calc(96vh - 36px)",margin:"0 5vw","border-collapse":"collapse","overflow-y":"scroll","background-color":"#eee"};var nn=()=>g`  <table style=${on} cellSpacing="0">    <tbody>      ${Y(Ho,en)}    </tbody>  </table>`,rn=Object.defineProperty,ln=Object.defineProperties,sn=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,kt=(e,t,o)=>t in e?rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,un=(e,t)=>{for(var o in t||(t={}))an.call(t,o)&&kt(e,o,t[o]);if(Ct)for(var o of Ct(t))cn.call(t,o)&&kt(e,o,t[o]);return e},pn=(e,t)=>ln(e,sn(t));const dn=pn(un({},k("50px")),{position:"fixed",right:"2vw",bottom:"4vh"}),fn=()=>{const e=w(),t=at(),o=Math.max(1,...e.map(n=>n.day));u({mode:"add",id:t,columnIds:[],day:o,time:"12:00",text:""})};var yn=()=>g`  <button style=${dn} onclick=${fn}>+</button>`,mn=Object.defineProperty,$n=Object.defineProperties,vn=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,Bt=(e,t,o)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,bn=(e,t)=>{for(var o in t||(t={}))gn.call(t,o)&&Bt(e,o,t[o]);if(It)for(var o of It(t))hn.call(t,o)&&Bt(e,o,t[o]);return e},_n=(e,t)=>$n(e,vn(t));const xn={position:"fixed",left:"2vw",bottom:"4vh"},jt=_n(bn({},k("40px")),{display:"block","font-size":"20px","margin-top":"1vh"}),wn=g`<input type="file" accept="application/json" onchange=${e=>{e.target.files[0].text().then(o=>{const{columns:n,activities:r,timePlots:l}=JSON.parse(o);x(n),w(r),_(l)}).catch(()=>{})}} />`,Pn=()=>wn.click(),Et=g`<a download="tl-note.json" />`,On=()=>{const e={columns:x(),activities:w(),timePlots:_()};Et.href=`data:application/json,${encodeURIComponent(JSON.stringify(e,null,2))}`,Et.click()};var Sn=()=>g`  <div style=${xn}>    <button style=${jt} onclick=${Pn}>üìÇ</button>    <button style=${jt} onclick=${On}>üíæ</button>  </div>`;const Cn={margin:"2vh 0","font-size":"14px","font-family":"sans-serif"},kn=()=>g`  <div style=${Cn}>    <${co} />    <${nn} />  </div>  <${yn} />  <${Sn} />  <${be} />  <${Re} />  <${Ro} />`;document.body.append(kn())})();
