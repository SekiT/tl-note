(function(){"use strict";let At=[],d;function Tt(e){let t=d,o=()=>{};d=o,H(o);let n=e(()=>{V(o),d=void 0});return d=t,n}function Nt(e){let t=d;d=void 0;let o=e();return d=t,o}function z(e){function t(o){if(arguments.length===0)return d&&!t.__o.has(d)&&(t.__o.add(d),d.u.push(t)),e;e=o;let n=d;return d=void 0,t.o=new Set(t.__o),t.o.forEach(r=>r.i=!1),t.o.forEach(r=>{r.i||r()}),d=n,e}return t.$o=1,t.__o=new Set,t.t=At,t}function f(e,t){function o(){let r=d;return d&&d.__c.push(o),V(o),o.i=!0,d=o,t=e(t),d=r,t}function n(){return o.i?d&&o.u.forEach(r=>r()):t=o(),t}return e.s=o,H(o),o(),n.$o=1,n}function Ft(e){return d&&d.l.push(e),e}function zt(e){return f(e),()=>V(e.s)}function V(e){e.__c.forEach(V),e.u.forEach(t=>{t.__o.delete(e),t.o&&t.o.delete(e)}),e.l.forEach(t=>t()),H(e)}function H(e){e.u=[],e.__c=[],e.l=[]}let et=(e,t,o,n)=>{let r={};for(let l=1;l<t.length;l++){let s=t[l],c=typeof s=="number"?o[s]:s,a=t[++l];if(a===1)n[0]=c;else if(a===3)n[1]=Object.assign(n[1]||{},c);else if(a===5)(n[1]=n[1]||{})[t[++l]]=c;else if(a===6){let v=t[++l],I=(n[1]=n[1]||{})[v],y=r[v];y||typeof c!="function"&&typeof I!="function"||(y=I&&[I]||[],n[1][v]=function(){let X="";for(var F=0;F<y.length;F++)X+=typeof y[F]=="function"?y[F].call(this):y[F];return X}),y?y.push(c):n[1][v]+=c+""}else if(a){let v=()=>e.apply(null,et(e,c,o,["",null]));n.push(typeof n[0]=="function"?v:v())}else n.push(c)}return n},Mt=function(e){let t,o,n=1,r="",l="",s=[0],c=a=>{n===1&&(a||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(a||r,0):n===3&&(a||r)?(s.push(a||r,1),n=2):n===2&&r==="..."&&a?s.push(a,3):n===2&&r&&!a?s.push(!0,5,r):n>=5&&((r||!a&&n===5)&&(s.push(r,n,o),n=6),a&&(s.push(a,n,o),n=6)),r=""};for(let a=0;a<e.length;a++){a&&(n===1&&c(),c(a));for(let v=0;v<e[a].length;v++)t=e[a][v],n===1?t==="<"?(c(),s=[s],n=3):r+=t:n===4?r==="--"&&t===">"?(n=1,r=""):r=t+r[0]:l?t===l?l="":r+=t:t==='"'||t==="'"?l=t:t===">"?(c(),n=1):n&&(t==="="?(n=5,o=r,r=""):t==="/"&&(n<5||e[a][v+1]===">")?(c(),n===3&&(s=s[0]),n=s,(s=s[0]).push(n,2),n=0):t===" "||t==="	"||t===`
`||t==="\r"?(c(),n=2):r+=t),n===3&&r==="!--"&&(n=4,s=s[0])}return c(),s},ot=new Map,Vt=function(e){let t=ot.get(this);return t||(t=new Map,ot.set(this,t)),t=et(this,t.get(e)||(t.set(e,t=Mt(e)),t),arguments,[]),t.length>1?t:t[0]},Lt=function(){let e=Vt.apply(this,arguments);if(e)return Array.isArray(e)?this(e):typeof e=="object"?e:this([e])};function Rt(){let e=Lt.bind(this);return(this.wrap||e).apply(e,arguments)}let i={},Wt=[];function nt(e){return this.t&&this.t[e.type](e)}i.h=(...e)=>{let t,o=n=>{if(n!=null)if(typeof n=="string")t?i.add(t,n):t=i.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))t||(t=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)t?i.add(t,n):t=n;else if(typeof n=="object")i.property(t,n,null,i.s);else if(typeof n=="function")if(t){let r=i.add(t,"");i.insert(t,n,r)}else t=n.apply(null,e.splice(1));else i.add(t,""+n)};return e.forEach(o),t},i.insert=(e,t,o,n,r)=>(e=o&&o.parentNode||e,r=r||n instanceof Node&&n,t===n||(n&&typeof n!="string"||!(typeof t=="string"||typeof t=="number"&&(t+=""))?typeof t=="function"?i.subscribe(()=>{n=i.insert(e,t.call({el:e,endMark:o}),o,n,r)}):(o?n&&(r||(r=n.o&&n.o.nextSibling||o.previousSibling),i.rm(e,r,o)):e.textContent="",n=null,t&&t!==!0&&(n=i.add(e,t,o))):(n!=null&&e.firstChild?o?(o.previousSibling||e.lastChild).data=t:e.firstChild.data=t:o?i.add(e,t,o):e.textContent=t,n=t)),n),i.property=(e,t,o,n,r)=>{if(t!=null)if(!o||o==="attrs"&&(n=!0))for(o in t)i.property(e,t[o],o,n,r);else o[0]!=="o"||o[1]!=="n"||t.$o?typeof t=="function"?i.subscribe(()=>{i.property(e,t.call({el:e,name:o}),o,n,r)}):r?e.style.setProperty(o,t):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?e.setAttribute(o,t):o==="style"?typeof t=="string"?e.style.cssText=t:i.property(e,t,null,n,!0):(o==="class"&&(o+="Name"),e[o]=t):((l,s,c)=>{s=s.slice(2).toLowerCase(),c?l.addEventListener(s,nt):l.removeEventListener(s,nt),(l.t||(l.t={}))[s]=c})(e,o,t)},i.add=(e,t,o)=>{let n=(r=>{const{childNodes:l}=r;if(l&&r.nodeType===11)return l.length<2?l[0]:{o:i.add(r,"",l[0])}})(t=(r=>typeof r=="string"?document.createTextNode(r):r instanceof Node?r:i.h(Wt,r))(t))||t;return e.insertBefore(t,o&&o.parentNode&&o),n},i.rm=(e,t,o)=>{for(;t&&t!==o;){let n=t.nextSibling;e===t.parentNode&&e.removeChild(t),t=n}},i.subscribe=zt,i.cleanup=Ft,i.root=Tt,i.sample=Nt,i.hs=(...e)=>{let t=i.s;i.s=!0;let o=rt(...e);return i.s=t,o};let rt=(...e)=>i.h.apply(i.h,e),g=(...e)=>Rt.apply(rt,e);var Ut=Object.defineProperty,Xt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,it=(e,t,o)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,qt=(e,t)=>{for(var o in t||(t={}))Kt.call(t,o)&&it(e,o,t[o]);if(lt)for(var o of lt(t))Ht.call(t,o)&&it(e,o,t[o]);return e},Gt=(e,t)=>Xt(e,Jt(t));const k=e=>({width:e,height:e,"font-size":`calc(${e} * 0.8)`,padding:0,border:"2px solid #99c","border-radius":"50%","background-color":"#ccf",color:"#339"}),q=e=>Gt(qt({},k(e)),{position:"absolute",right:"7px","font-size":"12px","background-color":"#ccc","border-color":"#999"}),G={position:"fixed",top:0,left:0,width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.6)","font-family":"sans-serif","font-size":"24px"},Q={position:"absolute",top:"50vh",left:"50vw",transform:"translate(-50%, -50%)","border-radius":"12px",padding:"12px","background-color":"white"},_=z([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),L=([e,t,o])=>e+t+o<384?"white":"black",x=z([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),st=f(()=>`a${Math.max(0,...x().map(({id:e})=>parseInt(e.slice(1),10)))+1}`);var Qt=Object.defineProperty,Yt=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,ut=(e,t,o)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))at.call(t,o)&&ut(e,o,t[o]);if(R)for(var o of R(t))ct.call(t,o)&&ut(e,o,t[o]);return e},E=(e,t)=>Yt(e,Zt(t)),te=(e,t)=>{var o={};for(var n in e)at.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&R)for(var n of R(e))t.indexOf(n)<0&&ct.call(e,n)&&(o[n]=e[n]);return o};const h=z({mode:"none",id:"",color:[0,0,0],name:""}),ee=f(()=>E(j({},G),{display:h().mode==="none"?"none":"block"})),oe={"font-size":"18px"},ne={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},re=f(()=>ne[h().mode]),le=q("24px"),ie=()=>{h(E(j({},h()),{mode:"none"}))},se={margin:"5px 0 7px 0"},pt=f(()=>`#${h().color.map(e=>e.toString(16).padStart(2,"0")).join("")}`),ae=f(()=>h().name),ce={width:"24px",height:"24px",padding:0,"border-radius":"12px","background-color":"transparent"},ue=e=>{const[t,o,n,r,l,s]=e.target.value.slice(1).split(""),c=[t+o,n+r,l+s].map(a=>parseInt(a,16));h(E(j({},h()),{color:c}))},pe=f(()=>({"margin-left":"5px",padding:0,width:"20vw","font-size":"24px","line-height":"24px","text-align":"center","background-color":pt(),color:L(h().color)})),de=e=>{h(E(j({},h()),{name:e.target.value}))},fe={"margin-top":"7px"},ye=E(j({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),me=()=>{const e=h();_(_().filter(({id:t})=>t!==e.id)),x(x().flatMap(t=>{const{columnIds:o}=t;return o.length===1&&o[0]===e.id?[]:[E(j({},t),{columnIds:o.filter(n=>n!==e.id)})]})),h(E(j({},e),{mode:"none"}))},$e=f(()=>h().mode==="update"&&g`<button style=${ye} onclick=${me}>ğŸ—‘ï¸</button>`),ve=E(j({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9"}),ge=()=>{const e=h(),{mode:t}=e,o=te(e,["mode"]),n=_();_(t==="add"?[...n,o]:n.map(r=>r.id===o.id?o:r)),h(j({mode:"none"},o))};var he=()=>g`  <div style=${ee}>    <div style=${Q}>      <div style="display:flex">        <div style=${oe}>${re}</div>        <button style=${le} onclick=${ie}>X</button>      </div>      <hr style=${se} />      <div>        <input type="color" value=${pt} style=${ce} onchange=${ue} />        <input type="text" value=${ae} style=${pe} onchange=${de} />      </div>      <div style=${fe}>        ${$e}        <button style=${ve} onclick=${ge}>âœ”ï¸</button>      </div>    </div>  </div>`;function Y(e,t,o){const{root:n,subscribe:r,sample:l,cleanup:s}=i;o==null&&(o=!t.$t);let c=i.h([]),a=i.add(c,""),v=new Map,I=new Map,y=new Set;function X(b,D){if(b==null)return;let B=I.get(b);return D===1?(y.delete(b),B||(B=o?n(m=>(v.set(b,m),t(b.$v||b))):t(b.$v||b),B.nodeType===11&&(B=(m=>{const{childNodes:$}=m,{length:C}=$;if(C<2)return $[0];let P=Array.from($);return{nodeType:111,t:P[0],o:P[C-1],l(){if($.length!==C){let M=0;for(;M<C;)m.appendChild(P[M++])}return m}}})(B)||B),I.set(b,B))):D===-1&&y.add(b),((m,$)=>m.nodeType===111?1/$<0?$?i.rm(m.t.parentNode,m.t.nextSibling,m.o.nextSibling)||m.t:m.o:$?m.l():m.t:m)(B,D)}function F(b){let D=v.get(b);D&&(D(),v.delete(b)),I.delete(b)}return s(r(b=>{let D=e();return l(()=>{y.clear();let B=Array.from(function(m,$,C,P,M){let Et=new Map,Dt=new Map,p,A;for(p=0;p<$.length;p++)Et.set($[p],p);for(p=0;p<C.length;p++)Dt.set(C[p],p);for(p=A=0;p!==$.length||A!==C.length;){var tt=$[p],J=C[A];if(tt===null)p++;else if(C.length<=A)m.removeChild(P($[p],-1)),p++;else if($.length<=p)m.insertBefore(P(J,1),P($[p],0)||M),A++;else if(tt===J)p++,A++;else{var Cn=Dt.get(tt),K=Et.get(J);Cn===void 0?(m.removeChild(P($[p],-1)),p++):K===void 0?(m.insertBefore(P(J,1),P($[p],0)||M),A++):(m.insertBefore(P($[K],1),P($[p],0)||M),$[K]=null,K>p+1&&p++,A++)}}return C}(a.parentNode,b||[],D,X,a));return y.forEach(F),B})})),s(function(){v.forEach(b=>b()),v.clear(),I.clear(),y.clear()}),c}var w=z([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const be=(e,t)=>{const{length:o}=e;for(let n=0;n<o;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},_e=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;function*xe({fromDay:e,fromTime:t,toDay:o,toTime:n,step:r}){let l=e,[s,c]=t.split(":").map(y=>parseInt(y,10));const[a,v]=n.split(":").map(y=>parseInt(y,10)),I=[o,a,v];for(;be([l,s,c],I)<=0;){yield[l,_e(s,c)];const y=Math.floor((c+r)/60);l+=Math.floor((s+y)/24),s=(s+y)%24,c=(c+r)%60}}var we=Object.defineProperty,Pe=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,ft=(e,t,o)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,T=(e,t)=>{for(var o in t||(t={}))Se.call(t,o)&&ft(e,o,t[o]);if(dt)for(var o of dt(t))Ce.call(t,o)&&ft(e,o,t[o]);return e},N=(e,t)=>Pe(e,Oe(t));const W=z({open:!1}),ke=f(()=>w().map((e,t)=>[e,t])),Ie=f(()=>N(T({},G),{display:W().open?"block":"none"})),Be={"font-size":"18px"},je=N(T({},q("24px")),{position:"flex","justify-self":"flex-end","align-self":"center"}),Ee=()=>{W(N(T({},W()),{open:!1}))},De={margin:"5px 0 7px 0"},Ae={display:"flex",margin:"5px 0",width:"100%","font-size":"16px","align-items":"center"},Z={margin:"0 3px",width:"32px","font-size":"16px"},yt={margin:"0 6px 0 3px","font-size":"16px"},mt=(e,t)=>o=>{const n=parseInt(o.target.value,10);Number.isNaN(n)||w(w().map((r,l)=>l===t?N(T({},r),{[e]:n}):r))},$t=(e,t)=>o=>{const{value:n}=o.target;n!==""&&w(w().map((r,l)=>l===t?N(T({},r),{[e]:n}):r))},Te=N(T({},k("24px")),{"margin-left":"6px","font-size":"12px","background-color":"#fcc","border-color":"#c99"}),Ne=e=>()=>{w(w().filter((t,o)=>o!==e))},Fe=([{fromDay:e,fromTime:t,toDay:o,toTime:n,step:r},l])=>g`    <div style=${Ae}>      Day      <input        type="number"        style=${Z}        onblur=${mt("fromDay",l)}        value=${e}        min="1"      />      <input        type="time"        style=${yt}        onblur=${$t("fromTime",l)}        value=${t}      />      <span style="word-break:keep-all">~ Day</span>      <input        type="number"        style=${Z}        onblur=${mt("toDay",l)}        value=${o}        min="1"      />      <input        type="time"        style=${yt}        onblur=${$t("toTime",l)}        value=${n}      />      /      <input type="number" style=${Z} value=${r} />      min      <button style=${Te} onclick=${Ne(l)}>ğŸ—‘ï¸</button>    </div>  `,ze=N(T({},k("24px")),{"align-self":"flex-end"}),Me=()=>{w([...w(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var Ve=()=>g`  <div style=${Ie}>    <div style=${Q}>      <div style="display:flex">        <div style=${Be}>æ™‚åˆ»ãƒ—ãƒ­ãƒƒãƒˆç·¨é›†</div>        <div style="display:flex;flex:auto;justify-content:flex-end">          <button style=${je} onclick=${Ee}>X</button>        </div>      </div>      <hr style=${De} />      <div style="display:flex;flex-direction:column;margin:0 5px">        ${Y(ke,Fe)}        <button style=${ze} onclick=${Me}>+</button>      </div>    </div>  </div>`,Le=Object.defineProperty,Re=Object.defineProperties,We=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,gt=(e,t,o)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Je=(e,t)=>{for(var o in t||(t={}))Ue.call(t,o)&&gt(e,o,t[o]);if(vt)for(var o of vt(t))Xe.call(t,o)&&gt(e,o,t[o]);return e},Ke=(e,t)=>Re(e,We(t));const He=({color:e,name:t},o)=>{const n=75/o;return{width:`${n}vw`,"line-height":"36px","font-size":`min(24px, ${n/t.length}vw)`,"text-align":"center","border-radius":"12px 12px 0 0","background-color":`rgb(${e.join(",")})`,color:L(e)}},qe=e=>{const t=e.target.getAttribute("data-id"),o=_().find(({id:n})=>n===t);!o||h({mode:"update",id:t,color:o.color,name:o.name})},Ge=(e,t)=>g`  <div style=${He(e,t)} onclick=${qe} data-id=${e.id}>    ${e.name}  </div>`,Qe=f(()=>{const e=_(),{length:t}=e;return e.map(o=>Ge(o,t))}),Ye={display:"flex","margin-left":"5vw",width:"95vw",height:"36px","align-items":"center"},Ze={display:"flex",width:"10vw","font-size":"24px","justify-content":"center"},to={display:"flex",width:"75vw"},eo={display:"flex",width:"10vw","text-align":"left"},oo=Ke(Je({},k("min(max(4vw, 24px), 32px)")),{"align-self":"center","margin-left":"0.5vw"}),no=()=>{W({open:!0})},ro=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],lo=()=>`c${Math.max(..._().map(({id:e})=>parseInt(e.slice(1),10)),0)+1}`,io=()=>{h({mode:"add",id:lo(),color:[...Array(3)].map(ro),name:""})};var so=()=>g`  <div style=${Ye}>    <div style=${Ze}>      <span style="cursor:default" onclick=${no}>â¬</span>    </div>    <div style=${to}>      ${Qe}    </div>    <div style=${eo}>      <button style=${oo} onclick=${io}>+</button>    </div>  </div>`,ao=Object.defineProperty,co=Object.defineProperties,uo=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,_t=(e,t,o)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))ht.call(t,o)&&_t(e,o,t[o]);if(U)for(var o of U(t))bt.call(t,o)&&_t(e,o,t[o]);return e},S=(e,t)=>co(e,uo(t)),po=(e,t)=>{var o={};for(var n in e)ht.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&U)for(var n of U(e))t.indexOf(n)<0&&bt.call(e,n)&&(o[n]=e[n]);return o};const u=z({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),fo=f(()=>S(O({},G),{display:u().mode==="none"?"none":"block"})),yo=S(O({},Q),{width:"70%",height:"70%"}),mo={"margin-left":"7px","font-size":"24px"},$o={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},vo=f(()=>$o[u().mode]),go=q("36px"),ho=()=>u(S(O({},u()),{mode:"none"})),bo=(e,t,o)=>({"background-color":`rgb(${e.join(",")})`,color:L(e),opacity:t?1:.3,width:`${o}%`,"border-radius":"8px 8px 0 0","font-size":"16px","text-align":"center"}),_o=(e,t)=>()=>{const o=u(),n=t?o.columnIds.filter(r=>r!==e):[...o.columnIds,e];u(S(O({},o),{columnIds:n}))},xo=(e,t)=>({id:o,name:n,color:r})=>{const l=e.includes(o);return g`    <div      style=${bo(r,l,100/t)}      onclick=${_o(o,l)}    >      ${n}    </div>  `},wo=f(()=>{const{columnIds:e}=u(),t=_(),o=xo(e,t.length);return g`    ${t.map(o)}  `}),Po={"margin-top":"5px","font-size":"14px"},Oo={"margin-left":"5px",width:"30%"},So=f(()=>u().day),Co=e=>{u(S(O({},u()),{day:parseInt(e.target.value,10)||0}))},ko={"margin-top":"5px",width:"70%"},Io=f(()=>u().time),Bo=e=>{u(S(O({},u()),{time:e.target.value}))},jo={width:"calc(100% - 12px)",height:"calc(70vh - 109px)",padding:"5px","font-size":"18px","background-color":"#eee",color:"black","font-family":"sans-serif",resize:"none"},Eo=f(()=>u().text),Do=e=>{u(S(O({},u()),{text:e.target.value}))},Ao={"margin-top":"auto"},To=S(O({},k("30px")),{"margin-right":"7px","font-size":"15px","background-color":"#fcc","border-color":"#c99"}),No=()=>{const e=u(),{id:t}=e;x(x().filter(o=>o.id!==t)),u(S(O({},e),{mode:"none"}))},Fo=f(()=>u().mode==="update"?g`<button style=${To} onclick=${No}>ğŸ—‘ï¸</button>`:""),xt=f(()=>{const{columnIds:e,time:t}=u();return e.length===0||t===""}),zo=f(()=>S(O({},k("30px")),{"font-size":"15px","background-color":"#cfc","border-color":"#9c9",opacity:xt()?.3:1})),Mo=()=>{const e=u(),{mode:t}=e,o=po(e,["mode"]);x(t==="add"?[...x(),o]:x().map(n=>n.id===o.id?o:n)),u(S(O({},o),{mode:"none"}))};var Vo=()=>g`  <div style=${fo}>    <div style=${yo}>      <div style=${mo}>        ${vo}        <button style=${go} onclick=${ho}>X</button>      </div>      <hr />      <div style="display:flex">        ${wo}      </div>      <div style="display:flex;flex:25% 75%">        <div style="display:flex;flex-direction:column">          <div style=${Po}>            Day            <input type="number" style=${Oo} value=${So} onchange=${Co} />          </div>          <input type="time" style=${ko} value=${Io} onchange=${Bo} />          <div style=${Ao}>            ${Fo}            <button              style=${zo}              onclick=${Mo}              disabled=${xt}            >âœ”ï¸</button>          </div>        </div>        <div style="width:100%">          <textarea style=${jo} value=${Eo} onchange=${Do}></textarea>        </div>      </div>    </div>  </div>`,Lo=Object.defineProperty,wt=Object.getOwnPropertySymbols,Ro=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,Pt=(e,t,o)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Uo=(e,t)=>{for(var o in t||(t={}))Ro.call(t,o)&&Pt(e,o,t[o]);if(wt)for(var o of wt(t))Wo.call(t,o)&&Pt(e,o,t[o]);return e};const Ot=({day:e,time:t})=>[e,t].join(","),Xo=e=>{const[t,o]=e.split(",");return[parseInt(t,10),o]},Jo=f(()=>[...[...x().map(e=>[Ot(e),[e]]),...w().flatMap(e=>[...xe(e)]).map(([e,t])=>[Ot({day:e,time:t}),[]])].reduce((e,[t,o])=>(e.set(t,[...e.get(t)||[],...o]),e),new Map).entries()].map(([e,t])=>[...Xo(e),t]).sort(([e,t],[o,n])=>e<o?-1:e>o?1:t<n?-1:t>n?1:0)),Ko={"border-top":"1px dashed black","border-bottom":"1px dashed black"},Ho={padding:"3px 0",width:"10vw","text-align":"center",color:"black"},qo=f(()=>({display:"table-cell",padding:0,width:`${75/_().length}vw`,"text-align":"center","vertical-align":"top"})),Go=e=>({display:"block",margin:"1px",padding:"2px",border:"1px solid black","border-radius":"3px","background-color":`rgba(${e.join(",")},0.5)`,color:L(e),"z-index":1}),Qo=(e,t,o)=>()=>{u({mode:"add",id:st(),day:e,time:t,columnIds:[o],text:""})},Yo=e=>t=>{u(Uo({mode:"update"},e)),t.stopPropagation()},Zo=([e,t,o])=>g`  <tr style=${Ko}>    <td style=${Ho}>${t}</td>    ${Y(_,({id:n,color:r})=>g`
      <td style=${qo} onclick=${Qo(e,t,n)}>
        ${o.map(l=>l.columnIds.includes(n)?g`          <div style=${Go(r)} onclick=${Yo(l)} data-id=${l.id}>${l.text}</div>        `:"")}
      </td>
    `)}  </tr>`,tn={display:"block",width:"85vw","max-height":"calc(96vh - 36px)",margin:"0 5vw","border-collapse":"collapse","overflow-y":"scroll","background-color":"#eee"};var en=()=>g`  <table style=${tn} cellSpacing="0">    <tbody>      ${Y(Jo,Zo)}    </tbody>  </table>`,on=Object.defineProperty,nn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,ln=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,Ct=(e,t,o)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,an=(e,t)=>{for(var o in t||(t={}))ln.call(t,o)&&Ct(e,o,t[o]);if(St)for(var o of St(t))sn.call(t,o)&&Ct(e,o,t[o]);return e},cn=(e,t)=>nn(e,rn(t));const un=cn(an({},k("50px")),{position:"fixed",right:"2vw",bottom:"4vh"}),pn=()=>{const e=x(),t=st(),o=Math.max(1,...e.map(n=>n.day));u({mode:"add",id:t,columnIds:[],day:o,time:"12:00",text:""})};var dn=()=>g`  <button style=${un} onclick=${pn}>+</button>`,fn=Object.defineProperty,yn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,It=(e,t,o)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,gn=(e,t)=>{for(var o in t||(t={}))$n.call(t,o)&&It(e,o,t[o]);if(kt)for(var o of kt(t))vn.call(t,o)&&It(e,o,t[o]);return e},hn=(e,t)=>yn(e,mn(t));const bn={position:"fixed",left:"2vw",bottom:"4vh"},Bt=hn(gn({},k("40px")),{display:"block","font-size":"20px","margin-top":"1vh"}),_n=g`<input type="file" accept="application/json" onchange=${e=>{e.target.files[0].text().then(o=>{const{columns:n,activities:r,timePlots:l}=JSON.parse(o);_(n),x(r),w(l)}).catch(()=>{})}} />`,xn=()=>_n.click(),jt=g`<a download="tl-note.json" />`,wn=()=>{const e={columns:_(),activities:x(),timePlots:w()};jt.href=`data:application/json,${encodeURIComponent(JSON.stringify(e,null,2))}`,jt.click()};var Pn=()=>g`  <div style=${bn}>    <button style=${Bt} onclick=${xn}>ğŸ“‚</button>    <button style=${Bt} onclick=${wn}>ğŸ’¾</button>  </div>`;const On={margin:"2vh 0","font-size":"14px","font-family":"sans-serif"},Sn=()=>g`  <div style=${On}>    <${so} />    <${en} />  </div>  <${dn} />  <${Pn} />  <${he} />  <${Ve} />  <${Vo} />`;document.body.append(Sn())})();
