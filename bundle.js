(function(){"use strict";let _e=[],f;function Xe(t){let e=f,o=()=>{};f=o,Y(o);let n=t(()=>{L(o),f=void 0});return f=e,n}function qe(t){let e=f;f=void 0;let o=t();return f=e,o}function F(t){function e(o){if(arguments.length===0)return f&&!e.__o.has(f)&&(e.__o.add(f),f.u.push(e)),t;t=o;let n=f;return f=void 0,e.o=new Set(e.__o),e.o.forEach(i=>i.i=!1),e.o.forEach(i=>{i.i||i()}),f=n,t}return e.$o=1,e.__o=new Set,e.t=_e,e}function $(t,e){function o(){let i=f;return f&&f.__c.push(o),L(o),o.i=!0,f=o,e=t(e),f=i,e}function n(){return o.i?f&&o.u.forEach(i=>i()):e=o(),e}return t.l=o,Y(o),o(),n.$o=1,n}function Ke(t){return f&&f.v.push(t),t}function Le(t){return $(t),()=>L(t.l)}function L(t){t.__c.forEach(L),t.u.forEach(e=>{e.__o.delete(t),e.o&&e.o.delete(t)}),t.v.forEach(e=>e()),Y(t)}function Y(t){t.u=[],t.__c=[],t.v=[]}let ce=(t,e,o,n)=>{let i={};for(let l=1;l<e.length;l++){let a=e[l],c=typeof a=="number"?o[a]:a,r=e[++l];if(r===1)n[0]=c;else if(r===3)n[1]=Object.assign(n[1]||{},c);else if(r===5)(n[1]=n[1]||{})[e[++l]]=c;else if(r===6){let s=e[++l],d=(n[1]=n[1]||{})[s],y=i[s];y||typeof c!="function"&&typeof d!="function"||(y=d&&[d]||[],n[1][s]=function(){let S="";for(var m=0;m<y.length;m++)S+=typeof y[m]=="function"?y[m].call(this):y[m];return S}),y?y.push(c):n[1][s]+=c+""}else if(r){let s=()=>t.apply(null,ce(t,c,o,["",null]));n.push(typeof n[0]=="function"?s:s())}else n.push(c)}return n},Je=function(t){let e,o,n=1,i="",l="",a=[0],c=r=>{n===1&&(r||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(r||i,0):n===3&&(r||i)?(a.push(r||i,1),n=2):n===2&&i==="..."&&r?a.push(r,3):n===2&&i&&!r?a.push(!0,5,i):n>=5&&((i||!r&&n===5)&&(a.push(i,n,o),n=6),r&&(a.push(r,n,o),n=6)),i=""};for(let r=0;r<t.length;r++){r&&(n===1&&c(),c(r));for(let s=0;s<t[r].length;s++)e=t[r][s],n===1?e==="<"?(c(),a=[a],n=3):i+=e:n===4?i==="--"&&e===">"?(n=1,i=""):i=e+i[0]:l?e===l?l="":i+=e:e==='"'||e==="'"?l=e:e===">"?(c(),n=1):n&&(e==="="?(n=5,o=i,i=""):e==="/"&&(n<5||t[r][s+1]===">")?(c(),n===3&&(a=a[0]),n=a,(a=a[0]).push(n,2),n=0):e===" "||e==="	"||e===`
`||e==="\r"?(c(),n=2):i+=e),n===3&&i==="!--"&&(n=4,a=a[0])}return c(),a},ue=new Map,We=function(t){let e=ue.get(this);return e||(e=new Map,ue.set(this,e)),e=ce(this,e.get(t)||(e.set(t,e=Je(t)),e),arguments,[]),e.length>1?e:e[0]},Ge=function(){let t=We.apply(this,arguments);if(t)return Array.isArray(t)?this(t):typeof t=="object"?t:this([t])},Ue=function(){let t=Ge.bind(this);return(this.wrap||t).apply(t,arguments)},u={},Ve=[];function de(t){return this.t&&this.t[t.type](t)}u.h=(...t)=>{let e,o=n=>{if(n!=null)if(typeof n=="string")e?u.add(e,n):e=u.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))e||(e=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)e?u.add(e,n):e=n;else if(typeof n=="object")u.property(e,n,null,u.s);else if(typeof n=="function")if(e){let i=u.add(e,"");u.insert(e,n,i)}else e=n.apply(null,t.splice(1));else u.add(e,""+n)};return t.forEach(o),e},u.insert=(t,e,o,n,i)=>(t=o&&o.parentNode||t,i=i||n instanceof Node&&n,e===n||(n&&typeof n!="string"||!(typeof e=="string"||typeof e=="number"&&(e+=""))?typeof e=="function"?u.subscribe(()=>{n=u.insert(t,e.call({el:t,endMark:o}),o,n,i)}):(o?n&&(i||(i=n.o&&n.o.nextSibling||o.previousSibling),u.rm(t,i,o)):t.textContent="",n=null,e&&e!==!0&&(n=u.add(t,e,o))):(n!=null&&t.firstChild?o?(o.previousSibling||t.lastChild).data=e:t.firstChild.data=e:o?u.add(t,e,o):t.textContent=e,n=e)),n),u.property=(t,e,o,n,i)=>{if(e!=null)if(!o||o==="attrs"&&(n=!0))for(o in e)u.property(t,e[o],o,n,i);else o[0]!=="o"||o[1]!=="n"||e.$o?typeof e=="function"?u.subscribe(()=>{u.property(t,e.call({el:t,name:o}),o,n,i)}):i?t.style.setProperty(o,e):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?t.setAttribute(o,e):o==="style"?typeof e=="string"?t.style.cssText=e:u.property(t,e,null,n,!0):(o==="class"&&(o+="Name"),t[o]=e):((l,a,c)=>{a=a.slice(2).toLowerCase(),c?l.addEventListener(a,de):l.removeEventListener(a,de),(l.t||(l.t={}))[a]=c})(t,o,e)},u.add=(t,e,o)=>{let n=(i=>{const{childNodes:l}=i;if(l&&i.nodeType===11)return l.length<2?l[0]:{o:u.add(i,"",l[0])}})(e=(i=>typeof i=="string"?document.createTextNode(i):i instanceof Node?i:u.h(Ve,i))(e))||e;return t.insertBefore(e,o&&o.parentNode&&o),n},u.rm=(t,e,o)=>{for(;e&&e!==o;){let n=e.nextSibling;t===e.parentNode&&t.removeChild(e),e=n}},u.subscribe=Le,u.cleanup=Ke,u.root=Xe,u.sample=qe,u.hs=(...t)=>{let e=u.s;u.s=!0;let o=se(...t);return u.s=e,o};let se=(...t)=>u.h.apply(u.h,t),v=(...t)=>Ue.apply(se,t);const O=t=>` width:${t};height:${t};font-size:calc(${t} * 0.8);padding:0;border:2px solid #99c;border-radius:50%;background-color:#ccf;color:#339;`,Z=t=>` ${O(t)} position:absolute;right:7px;font-size:12px;background-color:#ccc;border-color:#999;`,ee=" position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0, 0, 0, 0.6);font-family:sans-serif;font-size:24px;",te=" position:absolute;top:50vh;left:50vw;transform:translate(-50%, -50%);border-radius:12px;padding:12px;background-color:white;",w=F([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),J=([t,e,o])=>t+e+o<384?"white":"black",k=F([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),pe=$(()=>`a${Math.max(0,...k().map(({id:t})=>parseInt(t.slice(1),10)))+1}`);var He=Object.defineProperty,Qe=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,ye=(t,e,o)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,B=(t,e)=>{for(var o in e||(e={}))$e.call(e,o)&&ye(t,o,e[o]);if(W)for(var o of W(e))fe.call(e,o)&&ye(t,o,e[o]);return t},X=(t,e)=>Qe(t,Re(e)),Ye=(t,e)=>{var o={};for(var n in t)$e.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&W)for(var n of W(t))e.indexOf(n)<0&&fe.call(t,n)&&(o[n]=t[n]);return o};const b=F({mode:"none",id:"",color:[0,0,0],name:""}),Ze=$(()=>` ${ee} display:${b().mode==="none"?"none":"block"};`),et=" font-size:18px;",tt={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},ot=$(()=>tt[b().mode]),nt=Z("24px"),it=()=>{b(X(B({},b()),{mode:"none"}))},rt=" margin:5px 0 7px 0;",me=$(()=>`#${b().color.map(t=>t.toString(16).padStart(2,"0")).join("")}`),lt=$(()=>b().name),at=" width:24px;height:24px;padding:0;border-radius:12px;background-color:transparent;",ct=t=>{const[e,o,n,i,l,a]=t.target.value.slice(1).split(""),c=[e+o,n+i,l+a].map(r=>parseInt(r,16));b(X(B({},b()),{color:c}))},ut=$(()=>` margin-left:5px;padding:0;width:20vw;font-size:24px;line-height:24px;text-align:center;background-color:${me()};color:${J(b().color)};`),dt=t=>{b(X(B({},b()),{name:t.target.value}))},st=" margin-top:7px;",pt=` ${O("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,$t=()=>{const t=b();w(w().filter(({id:e})=>e!==t.id)),k(k().flatMap(e=>{const{columnIds:o}=e;return o.length===1&&o[0]===t.id?[]:[X(B({},e),{columnIds:o.filter(n=>n!==t.id)})]})),b(X(B({},t),{mode:"none"}))},ft=$(()=>b().mode==="update"&&v`<button style=${pt} onclick=${$t}>üóëÔ∏è</button>`),yt=` ${O("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;`,ve=()=>{const t=b(),{mode:e}=t,o=Ye(t,["mode"]),n=w();w(e==="add"?[...n,o]:n.map(i=>i.id===o.id?o:i)),b(B({mode:"none"},o))},mt=t=>{t.shiftKey&&t.key==="Enter"&&ve()};var vt=()=>v`<div style=${Ze} onkeydown=${mt}><div style=${te}><div style="display:flex"><div style=${et}>${ot}</div><button style=${nt} onclick=${it}>X</button></div><hr style=${rt} /><div><input type="color" value=${me} style=${at} oninput=${ct} /><input type="text" value=${lt} style=${ut} oninput=${dt} /></div><div style=${st}>${ft}<button style=${yt} onclick=${ve}>‚úîÔ∏è</button></div></div></div>`;let G="nextSibling",bt=0;function U(t,e,o){let n;return typeof e=="string"?e=document.createTextNode(e):e instanceof Node||(e=u.h([],e)),e.nodeType===11&&(n=e.firstChild)&&n!==e.lastChild&&(n.t=e.lastChild.t=++bt),t.insertBefore(e,o),n||e}function N(t,e,o){let n=t.t;if(n)for(t=t[e];t&&t.t!==n;)t=t[e];return o?t:t[e]}function oe(t,e,o){let n;for(;e!==o;)n=e.nextSibling,t.removeChild(e),e=n}function gt(t,e,o,n){let i;for(;e!==o;)i=e.nextSibling,t.insertBefore(e,n),e=i}function ht(t,e){let o=-1,n=t.length;if(n>0&&t[n-1]<=e)return n-1;for(;n-o>1;){var i=(o+n)/2|0;t[i]>e?n=i:o=i}return o}function be(t,e,o){const{subscribe:n,root:i,sample:l,cleanup:a}=u;o==null&&(o=!e.$t);let c=document.createDocumentFragment(),r=U(c,""),s=U(c,""),d=new Map;function y(){d.forEach(g=>g()),d.clear()}function S(g){let h=d.get(g);h&&h(),d.delete(g)}function m(g,h,M,C,j){return o?i(I=>{let q=U(g,e(h,M,C),j);return d.set(q,I),q}):U(g,e(h,M,C),j)}return a(n(g=>{let h=t();return l(()=>ne(g||[],h||[],r,s,m,o&&y,o&&S))})),a(y),c}function ne(t,e,o,n,i,l,a){let c=n.parentNode,r,s=e.length;if(s===0){let A=o.previousSibling;return A&&A.previousSibling||n.nextSibling?oe(c,o.nextSibling,n):(c.textContent="",A&&c.appendChild(A),c.appendChild(o),c.appendChild(n)),l&&l(),[]}if(t.length===0){for(r=0;r<s;r++)i(c,e[r],r,e,n);return e.slice()}let d,y,S=0,m=0,g=t.length-1,h=s-1,M=o.nextSibling,C=n.previousSibling,j=n;e:for(;;){for(;t[S]===e[m];)if(m++,M=N(M,G),g<++S||h<m)break e;for(;t[g]===e[h];)if(h--,j=N(C,"previousSibling",!0),C=j.previousSibling,--g<S||h<m)break e;break}if(h<m){for(;S<=g--;)d=N(C,"previousSibling",!0),y=d.previousSibling,oe(c,d,C.nextSibling),a&&a(d),C=y;return e.slice()}if(g<S){for(;m<=h;)i(c,e[m++],m,e,j);return e.slice()}const I=new Array(h+1-m),q=new Map;for(r=m;r<=h;r++)I[r]=-1,q.set(e[r],r);s=0;let le=[];for(r=S;r<=g;r++)d=q.get(t[r]),d?(I[d]=r,s++):le.push(r);if(s===0)return ne(ne(t,[],o,n,i,l),e,o,n,i);let Q=[];for(d=M,r=S;r<=g;r++)Q[r]=d,d=N(d,G);for(r=0;r<le.length;r++)d=Q[le[r]],oe(c,d,N(d,G)),a&&a(d);let ae=function(A,fn){let T=[],R=[],D=-1,Te=new Array(A.length);for(var E=fn,yn=A.length;E<yn;E++){var K=A[E];if(!(K<0)){var _=ht(T,K);_!==-1&&(Te[E]=R[_]),_===D?(D++,T[D]=K,R[D]=E):K<T[_+1]&&(T[_+1]=K,R[_+1]=E)}}for(E=R[D];D>=0;E=Te[E],D--)T[D]=E;return T}(I,m);for(s=ae.length-1,r=h;r>=m;r--)ae[s]===r?(j=Q[I[ae[s]]],s--):(I[r]===-1?d=i(c,e[r],r,e,j):(d=Q[I[r]],gt(c,d,N(d,G),j)),j=d);return e.slice()}var x=F([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const ge=(t,e)=>{const{length:o}=t;for(let n=0;n<o;n+=1){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},xt=(t,e)=>`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`;function*wt({fromDay:t,fromTime:e,toDay:o,toTime:n,step:i}){let l=t,[a,c]=e.split(":").map(y=>parseInt(y,10));const[r,s]=n.split(":").map(y=>parseInt(y,10)),d=[o,r,s];for(;ge([l,a,c],d)<=0;){yield[l,xt(a,c)];const y=Math.floor((c+i)/60);l+=Math.floor((a+y)/24),a=(a+y)%24,c=(c+i)%60}}var kt=Object.defineProperty,St=Object.defineProperties,Ot=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,xe=(t,e,o)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,we=(t,e)=>{for(var o in e||(e={}))jt.call(e,o)&&xe(t,o,e[o]);if(he)for(var o of he(e))Et.call(e,o)&&xe(t,o,e[o]);return t},ke=(t,e)=>St(t,Ot(e));const V=F({open:!1}),Ct=$(()=>x().map((t,e)=>[t,e])),It=$(()=>` ${ee} display:${V().open?"block":"none"};`),At=" font-size:18px;",Dt=` ${Z("24px")} position:flex;justify-self:flex-end;align-self:center;`,Pt=()=>{V(ke(we({},V()),{open:!1}))},zt=" margin:5px 0 7px 0;",Ft=" display:flex;margin:5px 0;width:100%;font-size:16px;align-items:center;",ie=" margin:0 3px;width:32px;font-size:16px;",Se=" margin:0 6px 0 3px;font-size:16px;font-family:sans-serif;",re=(t,e,o)=>{x(x().map((n,i)=>i===t?ke(we({},n),{[e]:o}):n))},Oe=(t,e)=>o=>{const n=parseInt(o.target.value,10);if(Number.isNaN(n)){x(x());return}re(e,t,n)},je=(t,e)=>o=>{const{value:n}=o.target;if(n===""){x(x());return}re(e,t,n)},Bt=t=>e=>{const o=parseInt(e.target.value,10);if(!o){x(x());return}re(t,"step",o)},Nt=` ${O("24px")} margin-left:6px;font-size:12px;background-color:#fcc;border-color:#c99;`,Mt=t=>()=>{x(x().filter((e,o)=>o!==t))},Tt=([{fromDay:t,fromTime:e,toDay:o,toTime:n,step:i},l])=>v`<div style=${Ft}>Day<input type="number" style=${ie} onblur=${Oe("fromDay",l)} value=${t} min="1" /><input type="time" style=${Se} onblur=${je("fromTime",l)} value=${e} /><span style="word-break:keep-all">~ Day</span><input type="number" style=${ie} onblur=${Oe("toDay",l)} value=${o} min="1" /><input type="time" style=${Se} onblur=${je("toTime",l)} value=${n} />/<input type="number" style=${ie} onblur=${Bt(l)} value=${i} min="1" />min<button style=${Nt} onclick=${Mt(l)}>üóëÔ∏è</button></div>`,_t=` ${O("24px")} align-self:flex-end;`,Xt=()=>{x([...x(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var qt=()=>v`<div style=${It}><div style=${te}><div style="display:flex"><div style=${At}>ÊôÇÂàª„Éó„É≠„ÉÉ„ÉàÁ∑®ÈõÜ</div><div style="display:flex;flex:auto;justify-content:flex-end"><button style=${Dt} onclick=${Pt}>X</button></div></div><hr style=${zt} /><div style="display:flex;flex-direction:column;margin:0 5px">${be(Ct,Tt)}<button style=${_t} onclick=${Xt}>+</button></div></div></div>`;const Kt=({color:t,name:e},o)=>{const n=75/o;return` width:${n}vw;line-height:36px;font-size:min(24px, ${n/e.length}vw);text-align:center;border-radius:12px 12px 0 0;background-color:rgb(${t.join(",")});color:${J(t)};`},Lt=t=>{const e=t.target.getAttribute("data-id"),o=w().find(({id:n})=>n===e);!o||b({mode:"update",id:e,color:o.color,name:o.name})},Jt=(t,e)=>v`<div style=${Kt(t,e)} onclick=${Lt} data-id=${t.id}>${t.name||"\u3000"}</div>`,Wt=$(()=>{const t=w(),{length:e}=t;return t.map(o=>Jt(o,e))}),Gt=" display:flex;margin-left:5vw;width:95vw;height:36px;align-items:center;",Ut=" display:flex;width:10vw;font-size:24px;justify-content:center;",Vt=" display:flex;width:75vw;",Ht=" display:flex;width:10vw;text-align:left;",Qt="min(max(4vw, 24px), 32px)",Rt=` ${O(Qt)} align-self:center;margin-left:0.5vw;`,Yt=()=>{V({open:!0})},Zt=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],eo=()=>`c${Math.max(...w().map(({id:t})=>parseInt(t.slice(1),10)),0)+1}`,to=()=>{b({mode:"add",id:eo(),color:[...Array(3)].map(Zt),name:""})};var oo=()=>v`<div style=${Gt}><div style=${Ut}><span style="cursor:default" onclick=${Yt}>‚è¨</span></div><div style=${Vt}>${Wt}</div><div style=${Ht}><button style=${Rt} onclick=${to}>+</button></div></div>`,no=Object.defineProperty,io=Object.defineProperties,ro=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Ie=(t,e,o)=>e in t?no(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,P=(t,e)=>{for(var o in e||(e={}))Ee.call(e,o)&&Ie(t,o,e[o]);if(H)for(var o of H(e))Ce.call(e,o)&&Ie(t,o,e[o]);return t},z=(t,e)=>io(t,ro(e)),lo=(t,e)=>{var o={};for(var n in t)Ee.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&H)for(var n of H(t))e.indexOf(n)<0&&Ce.call(t,n)&&(o[n]=t[n]);return o};const p=F({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),ao=$(()=>` ${ee} display:${p().mode==="none"?"none":"block"};`),co=` ${te} width:70%;height:70%;`,uo=" margin-left:7px;font-size:24px;",so={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},po=$(()=>so[p().mode]),$o=Z("36px"),fo=()=>p(z(P({},p()),{mode:"none"})),yo=(t,e,o)=>` background-color:rgb(${t.join(",")});color:${J(t)};opacity:${e?1:.3};width:${o}%;border-radius:8px 8px 0 0;font-size:16px;text-align:center;`,mo=(t,e)=>()=>{const o=p(),n=e?o.columnIds.filter(i=>i!==t):[...o.columnIds,t];p(z(P({},o),{columnIds:n}))},vo=(t,e)=>({id:o,name:n,color:i})=>{const l=t.includes(o);return v`<div style=${yo(i,l,100/e)} onclick=${mo(o,l)} >${n}</div>`},bo=$(()=>{const{columnIds:t}=p(),e=w(),o=vo(t,e.length);return v` ${e.map(o)} `}),go=" margin-top:5px;font-size:14px;",ho=" margin-left:5px;width:30%;",xo=$(()=>p().day),wo=t=>{p(z(P({},p()),{day:parseInt(t.target.value,10)||0}))},ko=" margin-top:5px;width:70%;font-family:sans-serif;",So=$(()=>p().time),Oo=t=>{p(z(P({},p()),{time:t.target.value}))},jo=" width:calc(100% - 12px);height:calc(70vh - 109px);padding:5px;font-size:18px;background-color:#eee;color:black;font-family:sans-serif;resize:none;",Eo=$(()=>p().text),Co=t=>{p(z(P({},p()),{text:t.target.value}))},Io={"margin-top":"auto"},Ao=` ${O("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,Do=()=>{const t=p(),{id:e}=t;k(k().filter(o=>o.id!==e)),p(z(P({},t),{mode:"none"}))},Po=$(()=>p().mode==="update"?v`<button style=${Ao} onclick=${Do}>üóëÔ∏è</button>`:""),Ae=$(()=>{const{columnIds:t,time:e}=p();return t.length===0||e===""}),zo=$(()=>` ${O("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;opacity:${Ae()?.3:1};`),De=()=>{const t=p(),{mode:e}=t,o=lo(t,["mode"]);k(e==="add"?[...k(),o]:k().map(n=>n.id===o.id?o:n)),p(z(P({},o),{mode:"none"}))},Fo=t=>{t.shiftKey&&t.key==="Enter"&&De()};var Bo=()=>v`<div style=${ao} onkeydown=${Fo}><div style=${co}><div style=${uo}>${po}<button style=${$o} onclick=${fo}>X</button></div><hr /><div style="display:flex">${bo}</div><div style="display:flex;flex:25% 75%"><div style="display:flex;flex-direction:column"><div style=${go}>Day<input type="number" style=${ho} value=${xo} oninput=${wo} /></div><input type="time" style=${ko} value=${So} oninput=${Oo} /><div style=${Io}>${Po}<button style=${zo} onclick=${De} disabled=${Ae} >‚úîÔ∏è</button></div></div><div style="width:100%"><textarea style=${jo} value=${Eo} oninput=${Co}></textarea></div></div></div></div>`,No=Object.defineProperty,Mo=Object.defineProperties,To=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,ze=(t,e,o)=>e in t?No(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,Fe=(t,e)=>{for(var o in e||(e={}))_o.call(e,o)&&ze(t,o,e[o]);if(Pe)for(var o of Pe(e))Xo.call(e,o)&&ze(t,o,e[o]);return t},qo=(t,e)=>Mo(t,To(e));const Be=({day:t,time:e})=>[t,e].join(","),Ko=t=>{const[e,o]=t.split(",");return[parseInt(e,10),o]},Lo=$(()=>[...[...k().map(t=>[Be(t),[t]]),...x().flatMap(t=>[...wt(t)]).map(([t,e])=>[Be({day:t,time:e}),[]])].reduce((t,[e,o])=>(t.set(e,[...t.get(e)||[],...o]),t),new Map).entries()].map(([t,e])=>[...Ko(t),e]).sort(ge)),Jo=$(()=>{const t=w();return Lo().map(([e,o,n])=>[e,o,t.map(({id:i,color:l})=>({day:e,time:o,columnId:i,color:l,acts:n.flatMap(a=>a.columnIds.includes(i)?[qo(Fe({},a),{color:l})]:[])}))])}),Wo=" border-top:1px dashed black;border-bottom:1px dashed black;",Go=" padding:3px 0;width:10vw;text-align:center;color:black;",Uo=$(()=>` display:table-cell;padding:0;width:${75/w().length}vw;text-align:center;vertical-align:top;`),Vo=t=>` display:block;min-height:21px;margin:1px;padding:2px;border:1px solid black;border-radius:3px;background-color:rgba(${t.join(",")},0.5);color:${J(t)};z-index:1;`,Ho=(t,e,o)=>()=>{p({mode:"add",id:pe(),day:t,time:e,columnIds:[o],text:""})},Qo=t=>e=>{p(Fe({mode:"update"},t)),e.stopPropagation()},Ro=t=>v`<div style=${Vo(t.color)} onclick=${Qo(t)}>${t.text}</div>`,Yo=({day:t,time:e,columnId:o,acts:n})=>v`<td style=${Uo} onclick=${Ho(t,e,o)}>${n.map(Ro)}</td>`,Zo=([,t,e])=>v`<tr style=${Wo}><td style=${Go}>${t}</td>${e.map(Yo)}</tr>`,en=" display:block;width:85vw;max-height:calc(96vh - 36px);margin:0 5vw;border-collapse:collapse;overflow-y:scroll;background-color:#eee;";var tn=()=>v`<table style=${en} cellSpacing="0"><tbody>${be(Jo,Zo)}</tbody></table>`;const on=` ${O("50px")} position:fixed;right:2vw;bottom:4vh;`,nn=()=>{const t=k(),e=pe(),o=Math.max(1,...t.map(n=>n.day));p({mode:"add",id:e,columnIds:[],day:o,time:"12:00",text:""})};var rn=()=>v`<button style=${on} onclick=${nn}>+</button>`;const ln=" position:fixed;left:2vw;bottom:4vh;",Ne=` ${O("40px")} display:block;font-size:20px;margin-top:1vh;`,an=t=>{t.target.files[0].text().then(e=>{const{columns:o,activities:n,timePlots:i}=JSON.parse(e);w(o),k(n),x(i)}).catch(()=>{})},cn=v`<input type="file" accept="application/json" onchange=${an} />`,un=()=>cn.click(),Me=v`<a download="tl-note.json" />`,dn=()=>{const t={columns:w(),activities:k(),timePlots:x()};Me.href=`data:application/json,${encodeURIComponent(JSON.stringify(t,null,2))}`,Me.click()};var sn=()=>v`<div style=${ln}><button style=${Ne} onclick=${un}>üìÇ</button><button style=${Ne} onclick=${dn}>üíæ</button></div>`;const pn=" margin:2vh 0;font-size:14px;font-family:sans-serif;",$n=()=>v`<div style=${pn}><${oo} /><${tn} /></div><${rn} /><${sn} /><${vt} /><${qt} /><${Bo} />`;document.body.append($n())})();
