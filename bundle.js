(function(){"use strict";let It=[],f;function Et(t){let e=f,o=()=>{};f=o,X(o);let n=t(()=>{N(o),f=void 0});return f=e,n}function Dt(t){let e=f;f=void 0;let o=t();return f=e,o}function A(t){function e(o){if(arguments.length===0)return f&&!e.__o.has(f)&&(e.__o.add(f),f.u.push(e)),t;t=o;let n=f;return f=void 0,e.o=new Set(e.__o),e.o.forEach(r=>r.i=!1),e.o.forEach(r=>{r.i||r()}),f=n,t}return e.$o=1,e.__o=new Set,e.t=It,e}function p(t,e){function o(){let r=f;return f&&f.__c.push(o),N(o),o.i=!0,f=o,e=t(e),f=r,e}function n(){return o.i?f&&o.u.forEach(r=>r()):e=o(),e}return t.s=o,X(o),o(),n.$o=1,n}function jt(t){return f&&f.l.push(t),t}function At(t){return p(t),()=>N(t.s)}function N(t){t.__c.forEach(N),t.u.forEach(e=>{e.__o.delete(t),e.o&&e.o.delete(t)}),t.l.forEach(e=>e()),X(t)}function X(t){t.u=[],t.__c=[],t.l=[]}let Z=(t,e,o,n)=>{let r={};for(let l=1;l<e.length;l++){let i=e[l],c=typeof i=="number"?o[i]:i,a=e[++l];if(a===1)n[0]=c;else if(a===3)n[1]=Object.assign(n[1]||{},c);else if(a===5)(n[1]=n[1]||{})[e[++l]]=c;else if(a===6){let g=e[++l],P=(n[1]=n[1]||{})[g],y=r[g];y||typeof c!="function"&&typeof P!="function"||(y=P&&[P]||[],n[1][g]=function(){let R="";for(var j=0;j<y.length;j++)R+=typeof y[j]=="function"?y[j].call(this):y[j];return R}),y?y.push(c):n[1][g]+=c+""}else if(a){let g=()=>t.apply(null,Z(t,c,o,["",null]));n.push(typeof n[0]=="function"?g:g())}else n.push(c)}return n},Tt=function(t){let e,o,n=1,r="",l="",i=[0],c=a=>{n===1&&(a||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(a||r,0):n===3&&(a||r)?(i.push(a||r,1),n=2):n===2&&r==="..."&&a?i.push(a,3):n===2&&r&&!a?i.push(!0,5,r):n>=5&&((r||!a&&n===5)&&(i.push(r,n,o),n=6),a&&(i.push(a,n,o),n=6)),r=""};for(let a=0;a<t.length;a++){a&&(n===1&&c(),c(a));for(let g=0;g<t[a].length;g++)e=t[a][g],n===1?e==="<"?(c(),i=[i],n=3):r+=e:n===4?r==="--"&&e===">"?(n=1,r=""):r=e+r[0]:l?e===l?l="":r+=e:e==='"'||e==="'"?l=e:e===">"?(c(),n=1):n&&(e==="="?(n=5,o=r,r=""):e==="/"&&(n<5||t[a][g+1]===">")?(c(),n===3&&(i=i[0]),n=i,(i=i[0]).push(n,2),n=0):e===" "||e==="	"||e===`
`||e==="\r"?(c(),n=2):r+=e),n===3&&r==="!--"&&(n=4,i=i[0])}return c(),i},tt=new Map,Ft=function(t){let e=tt.get(this);return e||(e=new Map,tt.set(this,e)),e=Z(this,e.get(t)||(e.set(t,e=Tt(t)),e),arguments,[]),e.length>1?e:e[0]},zt=function(){let t=Ft.apply(this,arguments);if(t)return Array.isArray(t)?this(t):typeof t=="object"?t:this([t])};function Nt(){let t=zt.bind(this);return(this.wrap||t).apply(t,arguments)}let s={},Mt=[];function et(t){return this.t&&this.t[t.type](t)}s.h=(...t)=>{let e,o=n=>{if(n!=null)if(typeof n=="string")e?s.add(e,n):e=s.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))e||(e=document.createDocumentFragment()),n.forEach(o);else if(n instanceof Node)e?s.add(e,n):e=n;else if(typeof n=="object")s.property(e,n,null,s.s);else if(typeof n=="function")if(e){let r=s.add(e,"");s.insert(e,n,r)}else e=n.apply(null,t.splice(1));else s.add(e,""+n)};return t.forEach(o),e},s.insert=(t,e,o,n,r)=>(t=o&&o.parentNode||t,r=r||n instanceof Node&&n,e===n||(n&&typeof n!="string"||!(typeof e=="string"||typeof e=="number"&&(e+=""))?typeof e=="function"?s.subscribe(()=>{n=s.insert(t,e.call({el:t,endMark:o}),o,n,r)}):(o?n&&(r||(r=n.o&&n.o.nextSibling||o.previousSibling),s.rm(t,r,o)):t.textContent="",n=null,e&&e!==!0&&(n=s.add(t,e,o))):(n!=null&&t.firstChild?o?(o.previousSibling||t.lastChild).data=e:t.firstChild.data=e:o?s.add(t,e,o):t.textContent=e,n=e)),n),s.property=(t,e,o,n,r)=>{if(e!=null)if(!o||o==="attrs"&&(n=!0))for(o in e)s.property(t,e[o],o,n,r);else o[0]!=="o"||o[1]!=="n"||e.$o?typeof e=="function"?s.subscribe(()=>{s.property(t,e.call({el:t,name:o}),o,n,r)}):r?t.style.setProperty(o,e):n||o.slice(0,5)==="data-"||o.slice(0,5)==="aria-"?t.setAttribute(o,e):o==="style"?typeof e=="string"?t.style.cssText=e:s.property(t,e,null,n,!0):(o==="class"&&(o+="Name"),t[o]=e):((l,i,c)=>{i=i.slice(2).toLowerCase(),c?l.addEventListener(i,et):l.removeEventListener(i,et),(l.t||(l.t={}))[i]=c})(t,o,e)},s.add=(t,e,o)=>{let n=(r=>{const{childNodes:l}=r;if(l&&r.nodeType===11)return l.length<2?l[0]:{o:s.add(r,"",l[0])}})(e=(r=>typeof r=="string"?document.createTextNode(r):r instanceof Node?r:s.h(Mt,r))(e))||e;return t.insertBefore(e,o&&o.parentNode&&o),n},s.rm=(t,e,o)=>{for(;e&&e!==o;){let n=e.nextSibling;t===e.parentNode&&t.removeChild(e),e=n}},s.subscribe=At,s.cleanup=jt,s.root=Et,s.sample=Dt,s.hs=(...t)=>{let e=s.s;s.s=!0;let o=ot(...t);return s.s=e,o};let ot=(...t)=>s.h.apply(s.h,t),v=(...t)=>Nt.apply(ot,t);const k=t=>` width:${t};height:${t};font-size:calc(${t} * 0.8);padding:0;border:2px solid #99c;border-radius:50%;background-color:#ccf;color:#339;`,J=t=>` ${k(t)} position:absolute;right:7px;font-size:12px;background-color:#ccc;border-color:#999;`,H=" position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0, 0, 0, 0.6);font-family:sans-serif;font-size:24px;",q=" position:absolute;top:50vh;left:50vw;transform:translate(-50%, -50%);border-radius:12px;padding:12px;background-color:white;",w=A([{id:"c1",name:"A\u6C0F",color:[0,0,128]},{id:"c2",name:"B\u541B",color:[255,128,128]},{id:"c3",name:"C\u69D8",color:[128,255,128]}]),M=([t,e,o])=>t+e+o<384?"white":"black",_=A([{id:"a1",columnIds:["c1","c2"],day:1,time:"12:00",text:"A\u6C0F\u3068B\u541B\u304C\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u3067\u4F1A\u3063\u305F"},{id:"a2",columnIds:["c1"],day:1,time:"12:00",text:"A\u6C0F\u306F13:00\u307E\u3067\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u3044\u305F\u304C\u3001B\u541B\u4EE5\u5916\u3068\u306F\u4F1A\u3063\u3066\u3044\u306A\u3044"},{id:"a3",columnIds:["c3"],day:1,time:"13:05",text:"C\u69D8\u304C\u81EA\u5BA4\u304B\u3089\u51FA\u3066\u30A8\u30F3\u30C8\u30E9\u30F3\u30B9\u306B\u6765\u305F"}]),nt=p(()=>`a${Math.max(0,..._().map(({id:t})=>parseInt(t.slice(1),10)))+1}`);var Vt=Object.defineProperty,Lt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,it=(t,e,o)=>e in t?Vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,T=(t,e)=>{for(var o in e||(e={}))rt.call(e,o)&&it(t,o,e[o]);if(V)for(var o of V(e))lt.call(e,o)&&it(t,o,e[o]);return t},z=(t,e)=>Lt(t,Kt(e)),Rt=(t,e)=>{var o={};for(var n in t)rt.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&V)for(var n of V(t))e.indexOf(n)<0&&lt.call(t,n)&&(o[n]=t[n]);return o};const h=A({mode:"none",id:"",color:[0,0,0],name:""}),Wt=p(()=>` ${H} display:${h().mode==="none"?"none":"block"};`),Ut=" font-size:18px;",Xt={add:"\u767B\u5834\u4EBA\u7269\u8FFD\u52A0",update:"\u767B\u5834\u4EBA\u7269\u7DE8\u96C6"},Jt=p(()=>Xt[h().mode]),Ht=J("24px"),qt=()=>{h(z(T({},h()),{mode:"none"}))},Gt=" margin:5px 0 7px 0;",st=p(()=>`#${h().color.map(t=>t.toString(16).padStart(2,"0")).join("")}`),Qt=p(()=>h().name),Yt=" width:24px;height:24px;padding:0;border-radius:12px;background-color:transparent;",Zt=t=>{const[e,o,n,r,l,i]=t.target.value.slice(1).split(""),c=[e+o,n+r,l+i].map(a=>parseInt(a,16));h(z(T({},h()),{color:c}))},te=p(()=>` margin-left:5px;padding:0;width:20vw;font-size:24px;line-height:24px;text-align:center;background-color:${st()};color:${M(h().color)};`),ee=t=>{h(z(T({},h()),{name:t.target.value}))},oe=" margin-top:7px;",ne=` ${k("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,re=()=>{const t=h();w(w().filter(({id:e})=>e!==t.id)),_(_().flatMap(e=>{const{columnIds:o}=e;return o.length===1&&o[0]===t.id?[]:[z(T({},e),{columnIds:o.filter(n=>n!==t.id)})]})),h(z(T({},t),{mode:"none"}))},le=p(()=>h().mode==="update"&&v`<button style=${ne} onclick=${re}>ğŸ—‘ï¸</button>`),ie=` ${k("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;`,at=()=>{const t=h(),{mode:e}=t,o=Rt(t,["mode"]),n=w();w(e==="add"?[...n,o]:n.map(r=>r.id===o.id?o:r)),h(T({mode:"none"},o))},se=t=>{t.shiftKey&&t.key==="Enter"&&at()};var ae=()=>v`<div style=${Wt} onkeydown=${se}><div style=${q}><div style="display:flex"><div style=${Ut}>${Jt}</div><button style=${Ht} onclick=${qt}>X</button></div><hr style=${Gt} /><div><input type="color" value=${st} style=${Yt} oninput=${Zt} /><input type="text" value=${Qt} style=${te} oninput=${ee} /></div><div style=${oe}>${le}<button style=${ie} onclick=${at}>âœ”ï¸</button></div></div></div>`;function ct(t,e,o){const{root:n,subscribe:r,sample:l,cleanup:i}=s;o==null&&(o=!e.$t);let c=s.h([]),a=s.add(c,""),g=new Map,P=new Map,y=new Set;function R(b,B){if(b==null)return;let O=P.get(b);return B===1?(y.delete(b),O||(O=o?n(m=>(g.set(b,m),e(b.$v||b))):e(b.$v||b),O.nodeType===11&&(O=(m=>{const{childNodes:$}=m,{length:C}=$;if(C<2)return $[0];let S=Array.from($);return{nodeType:111,t:S[0],o:S[C-1],l(){if($.length!==C){let F=0;for(;F<C;)m.appendChild(S[F++])}return m}}})(O)||O),P.set(b,O))):B===-1&&y.add(b),((m,$)=>m.nodeType===111?1/$<0?$?s.rm(m.t.parentNode,m.t.nextSibling,m.o.nextSibling)||m.t:m.o:$?m.l():m.t:m)(O,B)}function j(b){let B=g.get(b);B&&(B(),g.delete(b)),P.delete(b)}return i(r(b=>{let B=t();return l(()=>{y.clear();let O=Array.from(function(m,$,C,S,F){let Ot=new Map,Bt=new Map,d,I;for(d=0;d<$.length;d++)Ot.set($[d],d);for(d=0;d<C.length;d++)Bt.set(C[d],d);for(d=I=0;d!==$.length||I!==C.length;){var Y=$[d],W=C[I];if(Y===null)d++;else if(C.length<=I)m.removeChild(S($[d],-1)),d++;else if($.length<=d)m.insertBefore(S(W,1),S($[d],0)||F),I++;else if(Y===W)d++,I++;else{var tn=Bt.get(Y),U=Ot.get(W);tn===void 0?(m.removeChild(S($[d],-1)),d++):U===void 0?(m.insertBefore(S(W,1),S($[d],0)||F),I++):(m.insertBefore(S($[U],1),S($[d],0)||F),$[U]=null,U>d+1&&d++,I++)}}return C}(a.parentNode,b||[],B,R,a));return y.forEach(j),O})})),i(function(){g.forEach(b=>b()),g.clear(),P.clear(),y.clear()}),c}var x=A([{fromDay:1,fromTime:"11:00",toDay:1,toTime:"16:00",step:30}]);const ce=(t,e)=>{const{length:o}=t;for(let n=0;n<o;n+=1){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},ue=(t,e)=>`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`;function*de({fromDay:t,fromTime:e,toDay:o,toTime:n,step:r}){let l=t,[i,c]=e.split(":").map(y=>parseInt(y,10));const[a,g]=n.split(":").map(y=>parseInt(y,10)),P=[o,a,g];for(;ce([l,i,c],P)<=0;){yield[l,ue(i,c)];const y=Math.floor((c+r)/60);l+=Math.floor((i+y)/24),i=(i+y)%24,c=(c+r)%60}}var pe=Object.defineProperty,fe=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,dt=(t,e,o)=>e in t?pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,pt=(t,e)=>{for(var o in e||(e={}))me.call(e,o)&&dt(t,o,e[o]);if(ut)for(var o of ut(e))$e.call(e,o)&&dt(t,o,e[o]);return t},ft=(t,e)=>fe(t,ye(e));const L=A({open:!1}),ge=p(()=>x().map((t,e)=>[t,e])),ve=p(()=>` ${H} display:${L().open?"block":"none"};`),he=" font-size:18px;",be=` ${J("24px")} position:flex;justify-self:flex-end;align-self:center;`,xe=()=>{L(ft(pt({},L()),{open:!1}))},we=" margin:5px 0 7px 0;",_e=" display:flex;margin:5px 0;width:100%;font-size:16px;align-items:center;",G=" margin:0 3px;width:32px;font-size:16px;",yt=" margin:0 6px 0 3px;font-size:16px;font-family:sans-serif;",Q=(t,e,o)=>{x(x().map((n,r)=>r===t?ft(pt({},n),{[e]:o}):n))},mt=(t,e)=>o=>{const n=parseInt(o.target.value,10);if(Number.isNaN(n)){x(x());return}Q(e,t,n)},$t=(t,e)=>o=>{const{value:n}=o.target;if(n===""){x(x());return}Q(e,t,n)},Se=t=>e=>{const o=parseInt(e.target.value,10);if(!o){x(x());return}Q(t,"step",o)},Ce=` ${k("24px")} margin-left:6px;font-size:12px;background-color:#fcc;border-color:#c99;`,ke=t=>()=>{x(x().filter((e,o)=>o!==t))},Pe=([{fromDay:t,fromTime:e,toDay:o,toTime:n,step:r},l])=>v`<div style=${_e}>Day<input type="number" style=${G} onblur=${mt("fromDay",l)} value=${t} min="1" /><input type="time" style=${yt} onblur=${$t("fromTime",l)} value=${e} /><span style="word-break:keep-all">~ Day</span><input type="number" style=${G} onblur=${mt("toDay",l)} value=${o} min="1" /><input type="time" style=${yt} onblur=${$t("toTime",l)} value=${n} />/<input type="number" style=${G} onblur=${Se(l)} value=${r} min="1" />min<button style=${Ce} onclick=${ke(l)}>ğŸ—‘ï¸</button></div>`,Oe=` ${k("24px")} align-self:flex-end;`,Be=()=>{x([...x(),{fromDay:1,fromTime:"00:00",toDay:1,toTime:"23:00",step:60}])};var Ie=()=>v`<div style=${ve}><div style=${q}><div style="display:flex"><div style=${he}>æ™‚åˆ»ãƒ—ãƒ­ãƒƒãƒˆç·¨é›†</div><div style="display:flex;flex:auto;justify-content:flex-end"><button style=${be} onclick=${xe}>X</button></div></div><hr style=${we} /><div style="display:flex;flex-direction:column;margin:0 5px">${ct(ge,Pe)}<button style=${Oe} onclick=${Be}>+</button></div></div></div>`;const Ee=({color:t,name:e},o)=>{const n=75/o;return` width:${n}vw;line-height:36px;font-size:min(24px, ${n/e.length}vw);text-align:center;border-radius:12px 12px 0 0;background-color:rgb(${t.join(",")});color:${M(t)};`},De=t=>{const e=t.target.getAttribute("data-id"),o=w().find(({id:n})=>n===e);!o||h({mode:"update",id:e,color:o.color,name:o.name})},je=(t,e)=>v`<div style=${Ee(t,e)} onclick=${De} data-id=${t.id}>${t.name||"\u3000"}</div>`,Ae=p(()=>{const t=w(),{length:e}=t;return t.map(o=>je(o,e))}),Te=" display:flex;margin-left:5vw;width:95vw;height:36px;align-items:center;",Fe=" display:flex;width:10vw;font-size:24px;justify-content:center;",ze=" display:flex;width:75vw;",Ne=" display:flex;width:10vw;text-align:left;",Me=` ${k("min(max(4vw, 24px), 32px)")} align-self:center;margin-left:0.5vw;`,Ve=()=>{L({open:!0})},Le=()=>[0,64,128,192,255][Math.floor(Math.random()*5)],Ke=()=>`c${Math.max(...w().map(({id:t})=>parseInt(t.slice(1),10)),0)+1}`,Re=()=>{h({mode:"add",id:Ke(),color:[...Array(3)].map(Le),name:""})};var We=()=>v`<div style=${Te}><div style=${Fe}><span style="cursor:default" onclick=${Ve}>â¬</span></div><div style=${ze}>${Ae}</div><div style=${Ne}><button style=${Me} onclick=${Re}>+</button></div></div>`,Ue=Object.defineProperty,Xe=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,ht=(t,e,o)=>e in t?Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,E=(t,e)=>{for(var o in e||(e={}))gt.call(e,o)&&ht(t,o,e[o]);if(K)for(var o of K(e))vt.call(e,o)&&ht(t,o,e[o]);return t},D=(t,e)=>Xe(t,Je(e)),He=(t,e)=>{var o={};for(var n in t)gt.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&K)for(var n of K(t))e.indexOf(n)<0&&vt.call(t,n)&&(o[n]=t[n]);return o};const u=A({mode:"none",id:"",columnIds:[],day:1,time:"",text:""}),qe=p(()=>` ${H} display:${u().mode==="none"?"none":"block"};`),Ge=` ${q} width:70%;height:70%;`,Qe=" margin-left:7px;font-size:24px;",Ye={add:"\u9805\u76EE\u8FFD\u52A0",update:"\u9805\u76EE\u7DE8\u96C6",none:""},Ze=p(()=>Ye[u().mode]),to=J("36px"),eo=()=>u(D(E({},u()),{mode:"none"})),oo=(t,e,o)=>` background-color:rgb(${t.join(",")});color:${M(t)};opacity:${e?1:.3};width:${o}%;border-radius:8px 8px 0 0;font-size:16px;text-align:center;`,no=(t,e)=>()=>{const o=u(),n=e?o.columnIds.filter(r=>r!==t):[...o.columnIds,t];u(D(E({},o),{columnIds:n}))},ro=(t,e)=>({id:o,name:n,color:r})=>{const l=t.includes(o);return v`<div style=${oo(r,l,100/e)} onclick=${no(o,l)} >${n}</div>`},lo=p(()=>{const{columnIds:t}=u(),e=w(),o=ro(t,e.length);return v` ${e.map(o)} `}),io=" margin-top:5px;font-size:14px;",so=" margin-left:5px;width:30%;",ao=p(()=>u().day),co=t=>{u(D(E({},u()),{day:parseInt(t.target.value,10)||0}))},uo=" margin-top:5px;width:70%;font-family:sans-serif;",po=p(()=>u().time),fo=t=>{u(D(E({},u()),{time:t.target.value}))},yo=" width:calc(100% - 12px);height:calc(70vh - 109px);padding:5px;font-size:18px;background-color:#eee;color:black;font-family:sans-serif;resize:none;",mo=p(()=>u().text),$o=t=>{u(D(E({},u()),{text:t.target.value}))},go={"margin-top":"auto"},vo=` ${k("30px")} margin-right:7px;font-size:15px;background-color:#fcc;border-color:#c99;`,ho=()=>{const t=u(),{id:e}=t;_(_().filter(o=>o.id!==e)),u(D(E({},t),{mode:"none"}))},bo=p(()=>u().mode==="update"?v`<button style=${vo} onclick=${ho}>ğŸ—‘ï¸</button>`:""),bt=p(()=>{const{columnIds:t,time:e}=u();return t.length===0||e===""}),xo=p(()=>` ${k("30px")} font-size:15px;background-color:#cfc;border-color:#9c9;opacity:${bt()?.3:1};`),xt=()=>{const t=u(),{mode:e}=t,o=He(t,["mode"]);_(e==="add"?[..._(),o]:_().map(n=>n.id===o.id?o:n)),u(D(E({},o),{mode:"none"}))},wo=t=>{t.shiftKey&&t.key==="Enter"&&xt()};var _o=()=>v`<div style=${qe} onkeydown=${wo}><div style=${Ge}><div style=${Qe}>${Ze}<button style=${to} onclick=${eo}>X</button></div><hr /><div style="display:flex">${lo}</div><div style="display:flex;flex:25% 75%"><div style="display:flex;flex-direction:column"><div style=${io}>Day<input type="number" style=${so} value=${ao} oninput=${co} /></div><input type="time" style=${uo} value=${po} oninput=${fo} /><div style=${go}>${bo}<button style=${xo} onclick=${xt} disabled=${bt} >âœ”ï¸</button></div></div><div style="width:100%"><textarea style=${yo} value=${mo} oninput=${$o}></textarea></div></div></div></div>`,So=Object.defineProperty,Co=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,_t=(t,e,o)=>e in t?So(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,St=(t,e)=>{for(var o in e||(e={}))Po.call(e,o)&&_t(t,o,e[o]);if(wt)for(var o of wt(e))Oo.call(e,o)&&_t(t,o,e[o]);return t},Bo=(t,e)=>Co(t,ko(e));const Ct=({day:t,time:e})=>[t,e].join(","),Io=t=>{const[e,o]=t.split(",");return[parseInt(e,10),o]},Eo=p(()=>[...[..._().map(t=>[Ct(t),[t]]),...x().flatMap(t=>[...de(t)]).map(([t,e])=>[Ct({day:t,time:e}),[]])].reduce((t,[e,o])=>(t.set(e,[...t.get(e)||[],...o]),t),new Map).entries()].map(([t,e])=>[...Io(t),e]).sort(([t,e],[o,n])=>t<o?-1:t>o?1:e<n?-1:e>n?1:0)),Do=p(()=>{const t=w();return Eo().map(([e,o,n])=>[e,o,t.map(({id:r,color:l})=>({day:e,time:o,columnId:r,color:l,acts:n.flatMap(i=>i.columnIds.includes(r)?[Bo(St({},i),{color:l})]:[])}))])}),jo=" border-top:1px dashed black;border-bottom:1px dashed black;",Ao=" padding:3px 0;width:10vw;text-align:center;color:black;",To=p(()=>` display:table-cell;padding:0;width:${75/w().length}vw;text-align:center;vertical-align:top;`),Fo=t=>` display:block;min-height:21px;margin:1px;padding:2px;border:1px solid black;border-radius:3px;background-color:rgba(${t.join(",")},0.5);color:${M(t)};z-index:1;`,zo=(t,e,o)=>()=>{u({mode:"add",id:nt(),day:t,time:e,columnIds:[o],text:""})},No=t=>e=>{u(St({mode:"update"},t)),e.stopPropagation()},Mo=t=>v`<div style=${Fo(t.color)} onclick=${No(t)}>${t.text}</div>`,Vo=({day:t,time:e,columnId:o,acts:n})=>v`<td style=${To} onclick=${zo(t,e,o)}>${n.map(Mo)}</td>`,Lo=([,t,e])=>v`<tr style=${jo}><td style=${Ao}>${t}</td>${e.map(Vo)}</tr>`,Ko=" display:block;width:85vw;max-height:calc(96vh - 36px);margin:0 5vw;border-collapse:collapse;overflow-y:scroll;background-color:#eee;";var Ro=()=>v`<table style=${Ko} cellSpacing="0"><tbody>${ct(Do,Lo)}</tbody></table>`;const Wo=` ${k("50px")} position:fixed;right:2vw;bottom:4vh;`,Uo=()=>{const t=_(),e=nt(),o=Math.max(1,...t.map(n=>n.day));u({mode:"add",id:e,columnIds:[],day:o,time:"12:00",text:""})};var Xo=()=>v`<button style=${Wo} onclick=${Uo}>+</button>`;const Jo=" position:fixed;left:2vw;bottom:4vh;",kt=` ${k("40px")} display:block;font-size:20px;margin-top:1vh;`,Ho=v`<input type="file" accept="application/json" onchange=${t=>{t.target.files[0].text().then(o=>{const{columns:n,activities:r,timePlots:l}=JSON.parse(o);w(n),_(r),x(l)}).catch(()=>{})}} />`,qo=()=>Ho.click(),Pt=v`<a download="tl-note.json" />`,Go=()=>{const t={columns:w(),activities:_(),timePlots:x()};Pt.href=`data:application/json,${encodeURIComponent(JSON.stringify(t,null,2))}`,Pt.click()};var Qo=()=>v`<div style=${Jo}><button style=${kt} onclick=${qo}>ğŸ“‚</button><button style=${kt} onclick=${Go}>ğŸ’¾</button></div>`;const Yo=" margin:2vh 0;font-size:14px;font-family:sans-serif;",Zo=()=>v`<div style=${Yo}><${We} /><${Ro} /></div><${Xo} /><${Qo} /><${ae} /><${Ie} /><${_o} />`;document.body.append(Zo())})();
